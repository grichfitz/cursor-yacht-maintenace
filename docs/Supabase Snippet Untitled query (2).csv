section,a1,a2,a3,a4,a5,a6,a7
COLUMNS,auth,amr_id_pk,id,uuid,YES,null,null
COLUMNS,auth,audit_log_entries,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,audit_log_entries,id,uuid,NO,null,null
COLUMNS,auth,audit_log_entries,instance_id,uuid,YES,null,null
COLUMNS,auth,audit_log_entries,ip_address,character varying(64),NO,''::character varying,null
COLUMNS,auth,audit_log_entries,payload,json,YES,null,null
COLUMNS,auth,audit_log_entries_pkey,id,uuid,YES,null,null
COLUMNS,auth,audit_logs_instance_id_idx,instance_id,uuid,YES,null,null
COLUMNS,auth,confirmation_token_idx,confirmation_token,character varying(255),YES,null,null
COLUMNS,auth,email_change_token_current_idx,email_change_token_current,character varying(255),YES,null,null
COLUMNS,auth,email_change_token_new_idx,email_change_token_new,character varying(255),YES,null,null
COLUMNS,auth,factor_id_created_at_idx,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,factor_id_created_at_idx,user_id,uuid,YES,null,null
COLUMNS,auth,flow_state,auth_code,text,YES,null,null
COLUMNS,auth,flow_state,auth_code_issued_at,timestamp with time zone,YES,null,null
COLUMNS,auth,flow_state,authentication_method,text,NO,null,null
COLUMNS,auth,flow_state,code_challenge,text,YES,null,null
COLUMNS,auth,flow_state,code_challenge_method,auth.code_challenge_method,YES,null,null
COLUMNS,auth,flow_state,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,flow_state,email_optional,boolean,NO,false,null
COLUMNS,auth,flow_state,id,uuid,NO,null,null
COLUMNS,auth,flow_state,invite_token,text,YES,null,null
COLUMNS,auth,flow_state,linking_target_id,uuid,YES,null,null
COLUMNS,auth,flow_state,oauth_client_state_id,uuid,YES,null,null
COLUMNS,auth,flow_state,provider_access_token,text,YES,null,null
COLUMNS,auth,flow_state,provider_refresh_token,text,YES,null,null
COLUMNS,auth,flow_state,provider_type,text,NO,null,null
COLUMNS,auth,flow_state,referrer,text,YES,null,null
COLUMNS,auth,flow_state,updated_at,timestamp with time zone,YES,null,null
COLUMNS,auth,flow_state,user_id,uuid,YES,null,null
COLUMNS,auth,flow_state_created_at_idx,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,flow_state_pkey,id,uuid,YES,null,null
COLUMNS,auth,identities,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,identities,email,text,YES,lower((identity_data ->> 'email'::text)),GENERATED
COLUMNS,auth,identities,id,uuid,NO,gen_random_uuid(),null
COLUMNS,auth,identities,identity_data,jsonb,NO,null,null
COLUMNS,auth,identities,last_sign_in_at,timestamp with time zone,YES,null,null
COLUMNS,auth,identities,provider,text,NO,null,null
COLUMNS,auth,identities,provider_id,text,NO,null,null
COLUMNS,auth,identities,updated_at,timestamp with time zone,YES,null,null
COLUMNS,auth,identities,user_id,uuid,NO,null,null
COLUMNS,auth,identities_email_idx,email,text,YES,null,null
COLUMNS,auth,identities_pkey,id,uuid,YES,null,null
COLUMNS,auth,identities_provider_id_provider_unique,provider,text,YES,null,null
COLUMNS,auth,identities_provider_id_provider_unique,provider_id,text,YES,null,null
COLUMNS,auth,identities_user_id_idx,user_id,uuid,YES,null,null
COLUMNS,auth,idx_auth_code,auth_code,text,YES,null,null
COLUMNS,auth,idx_oauth_client_states_created_at,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,idx_user_id_auth_method,authentication_method,text,YES,null,null
COLUMNS,auth,idx_user_id_auth_method,user_id,uuid,YES,null,null
COLUMNS,auth,instances,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,instances,id,uuid,NO,null,null
COLUMNS,auth,instances,raw_base_config,text,YES,null,null
COLUMNS,auth,instances,updated_at,timestamp with time zone,YES,null,null
COLUMNS,auth,instances,uuid,uuid,YES,null,null
COLUMNS,auth,instances_pkey,id,uuid,YES,null,null
COLUMNS,auth,mfa_amr_claims,authentication_method,text,NO,null,null
COLUMNS,auth,mfa_amr_claims,created_at,timestamp with time zone,NO,null,null
COLUMNS,auth,mfa_amr_claims,id,uuid,NO,null,null
COLUMNS,auth,mfa_amr_claims,session_id,uuid,NO,null,null
COLUMNS,auth,mfa_amr_claims,updated_at,timestamp with time zone,NO,null,null
COLUMNS,auth,mfa_amr_claims_session_id_authentication_method_pkey,authentication_method,text,YES,null,null
COLUMNS,auth,mfa_amr_claims_session_id_authentication_method_pkey,session_id,uuid,YES,null,null
COLUMNS,auth,mfa_challenge_created_at_idx,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,mfa_challenges,created_at,timestamp with time zone,NO,null,null
COLUMNS,auth,mfa_challenges,factor_id,uuid,NO,null,null
COLUMNS,auth,mfa_challenges,id,uuid,NO,null,null
COLUMNS,auth,mfa_challenges,ip_address,inet,NO,null,null
COLUMNS,auth,mfa_challenges,otp_code,text,YES,null,null
COLUMNS,auth,mfa_challenges,verified_at,timestamp with time zone,YES,null,null
COLUMNS,auth,mfa_challenges,web_authn_session_data,jsonb,YES,null,null
COLUMNS,auth,mfa_challenges_pkey,id,uuid,YES,null,null
COLUMNS,auth,mfa_factors,created_at,timestamp with time zone,NO,null,null
COLUMNS,auth,mfa_factors,factor_type,auth.factor_type,NO,null,null
COLUMNS,auth,mfa_factors,friendly_name,text,YES,null,null
COLUMNS,auth,mfa_factors,id,uuid,NO,null,null
COLUMNS,auth,mfa_factors,last_challenged_at,timestamp with time zone,YES,null,null
COLUMNS,auth,mfa_factors,last_webauthn_challenge_data,jsonb,YES,null,null
COLUMNS,auth,mfa_factors,phone,text,YES,null,null
COLUMNS,auth,mfa_factors,secret,text,YES,null,null
COLUMNS,auth,mfa_factors,status,auth.factor_status,NO,null,null
COLUMNS,auth,mfa_factors,updated_at,timestamp with time zone,NO,null,null
COLUMNS,auth,mfa_factors,user_id,uuid,NO,null,null
COLUMNS,auth,mfa_factors,web_authn_aaguid,uuid,YES,null,null
COLUMNS,auth,mfa_factors,web_authn_credential,jsonb,YES,null,null
COLUMNS,auth,mfa_factors_last_challenged_at_key,last_challenged_at,timestamp with time zone,YES,null,null
COLUMNS,auth,mfa_factors_pkey,id,uuid,YES,null,null
COLUMNS,auth,mfa_factors_user_friendly_name_unique,friendly_name,text,YES,null,null
COLUMNS,auth,mfa_factors_user_friendly_name_unique,user_id,uuid,YES,null,null
COLUMNS,auth,mfa_factors_user_id_idx,user_id,uuid,YES,null,null
COLUMNS,auth,oauth_auth_pending_exp_idx,expires_at,timestamp with time zone,YES,null,null
COLUMNS,auth,oauth_authorizations,approved_at,timestamp with time zone,YES,null,null
COLUMNS,auth,oauth_authorizations,authorization_code,text,YES,null,null
COLUMNS,auth,oauth_authorizations,authorization_id,text,NO,null,null
COLUMNS,auth,oauth_authorizations,client_id,uuid,NO,null,null
COLUMNS,auth,oauth_authorizations,code_challenge,text,YES,null,null
COLUMNS,auth,oauth_authorizations,code_challenge_method,auth.code_challenge_method,YES,null,null
COLUMNS,auth,oauth_authorizations,created_at,timestamp with time zone,NO,now(),null
COLUMNS,auth,oauth_authorizations,expires_at,timestamp with time zone,NO,(now() + '00:03:00'::interval),null
COLUMNS,auth,oauth_authorizations,id,uuid,NO,null,null
COLUMNS,auth,oauth_authorizations,nonce,text,YES,null,null
COLUMNS,auth,oauth_authorizations,redirect_uri,text,NO,null,null
COLUMNS,auth,oauth_authorizations,resource,text,YES,null,null
COLUMNS,auth,oauth_authorizations,response_type,auth.oauth_response_type,NO,'code'::auth.oauth_response_type,null
COLUMNS,auth,oauth_authorizations,scope,text,NO,null,null
COLUMNS,auth,oauth_authorizations,state,text,YES,null,null
COLUMNS,auth,oauth_authorizations,status,auth.oauth_authorization_status,NO,'pending'::auth.oauth_authorization_status,null
COLUMNS,auth,oauth_authorizations,user_id,uuid,YES,null,null
COLUMNS,auth,oauth_authorizations_authorization_code_key,authorization_code,text,YES,null,null
COLUMNS,auth,oauth_authorizations_authorization_id_key,authorization_id,text,YES,null,null
COLUMNS,auth,oauth_authorizations_pkey,id,uuid,YES,null,null
COLUMNS,auth,oauth_client_states,code_verifier,text,YES,null,null
COLUMNS,auth,oauth_client_states,created_at,timestamp with time zone,NO,null,null
COLUMNS,auth,oauth_client_states,id,uuid,NO,null,null
COLUMNS,auth,oauth_client_states,provider_type,text,NO,null,null
COLUMNS,auth,oauth_client_states_pkey,id,uuid,YES,null,null
COLUMNS,auth,oauth_clients,client_name,text,YES,null,null
COLUMNS,auth,oauth_clients,client_secret_hash,text,YES,null,null
COLUMNS,auth,oauth_clients,client_type,auth.oauth_client_type,NO,'confidential'::auth.oauth_client_type,null
COLUMNS,auth,oauth_clients,client_uri,text,YES,null,null
COLUMNS,auth,oauth_clients,created_at,timestamp with time zone,NO,now(),null
COLUMNS,auth,oauth_clients,deleted_at,timestamp with time zone,YES,null,null
COLUMNS,auth,oauth_clients,grant_types,text,NO,null,null
COLUMNS,auth,oauth_clients,id,uuid,NO,null,null
COLUMNS,auth,oauth_clients,logo_uri,text,YES,null,null
COLUMNS,auth,oauth_clients,redirect_uris,text,NO,null,null
COLUMNS,auth,oauth_clients,registration_type,auth.oauth_registration_type,NO,null,null
COLUMNS,auth,oauth_clients,token_endpoint_auth_method,text,NO,null,null
COLUMNS,auth,oauth_clients,updated_at,timestamp with time zone,NO,now(),null
COLUMNS,auth,oauth_clients_deleted_at_idx,deleted_at,timestamp with time zone,YES,null,null
COLUMNS,auth,oauth_clients_pkey,id,uuid,YES,null,null
COLUMNS,auth,oauth_consents,client_id,uuid,NO,null,null
COLUMNS,auth,oauth_consents,granted_at,timestamp with time zone,NO,now(),null
COLUMNS,auth,oauth_consents,id,uuid,NO,null,null
COLUMNS,auth,oauth_consents,revoked_at,timestamp with time zone,YES,null,null
COLUMNS,auth,oauth_consents,scopes,text,NO,null,null
COLUMNS,auth,oauth_consents,user_id,uuid,NO,null,null
COLUMNS,auth,oauth_consents_active_client_idx,client_id,uuid,YES,null,null
COLUMNS,auth,oauth_consents_active_user_client_idx,client_id,uuid,YES,null,null
COLUMNS,auth,oauth_consents_active_user_client_idx,user_id,uuid,YES,null,null
COLUMNS,auth,oauth_consents_pkey,id,uuid,YES,null,null
COLUMNS,auth,oauth_consents_user_client_unique,client_id,uuid,YES,null,null
COLUMNS,auth,oauth_consents_user_client_unique,user_id,uuid,YES,null,null
COLUMNS,auth,oauth_consents_user_order_idx,granted_at,timestamp with time zone,YES,null,null
COLUMNS,auth,oauth_consents_user_order_idx,user_id,uuid,YES,null,null
COLUMNS,auth,one_time_tokens,created_at,timestamp without time zone,NO,now(),null
COLUMNS,auth,one_time_tokens,id,uuid,NO,null,null
COLUMNS,auth,one_time_tokens,relates_to,text,NO,null,null
COLUMNS,auth,one_time_tokens,token_hash,text,NO,null,null
COLUMNS,auth,one_time_tokens,token_type,auth.one_time_token_type,NO,null,null
COLUMNS,auth,one_time_tokens,updated_at,timestamp without time zone,NO,now(),null
COLUMNS,auth,one_time_tokens,user_id,uuid,NO,null,null
COLUMNS,auth,one_time_tokens_pkey,id,uuid,YES,null,null
COLUMNS,auth,one_time_tokens_relates_to_hash_idx,relates_to,integer,YES,null,null
COLUMNS,auth,one_time_tokens_token_hash_hash_idx,token_hash,integer,YES,null,null
COLUMNS,auth,one_time_tokens_user_id_token_type_key,token_type,auth.one_time_token_type,YES,null,null
COLUMNS,auth,one_time_tokens_user_id_token_type_key,user_id,uuid,YES,null,null
COLUMNS,auth,reauthentication_token_idx,reauthentication_token,character varying(255),YES,null,null
COLUMNS,auth,recovery_token_idx,recovery_token,character varying(255),YES,null,null
COLUMNS,auth,refresh_tokens,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,refresh_tokens,id,bigint,NO,nextval('auth.refresh_tokens_id_seq'::regclass),null
COLUMNS,auth,refresh_tokens,instance_id,uuid,YES,null,null
COLUMNS,auth,refresh_tokens,parent,character varying(255),YES,null,null
COLUMNS,auth,refresh_tokens,revoked,boolean,YES,null,null
COLUMNS,auth,refresh_tokens,session_id,uuid,YES,null,null
COLUMNS,auth,refresh_tokens,token,character varying(255),YES,null,null
COLUMNS,auth,refresh_tokens,updated_at,timestamp with time zone,YES,null,null
COLUMNS,auth,refresh_tokens,user_id,character varying(255),YES,null,null
COLUMNS,auth,refresh_tokens_id_seq,is_called,boolean,NO,null,null
COLUMNS,auth,refresh_tokens_id_seq,last_value,bigint,NO,null,null
COLUMNS,auth,refresh_tokens_id_seq,log_cnt,bigint,NO,null,null
COLUMNS,auth,refresh_tokens_instance_id_idx,instance_id,uuid,YES,null,null
COLUMNS,auth,refresh_tokens_instance_id_user_id_idx,instance_id,uuid,YES,null,null
COLUMNS,auth,refresh_tokens_instance_id_user_id_idx,user_id,character varying(255),YES,null,null
COLUMNS,auth,refresh_tokens_parent_idx,parent,character varying(255),YES,null,null
COLUMNS,auth,refresh_tokens_pkey,id,bigint,YES,null,null
COLUMNS,auth,refresh_tokens_session_id_revoked_idx,revoked,boolean,YES,null,null
COLUMNS,auth,refresh_tokens_session_id_revoked_idx,session_id,uuid,YES,null,null
COLUMNS,auth,refresh_tokens_token_unique,token,character varying(255),YES,null,null
COLUMNS,auth,refresh_tokens_updated_at_idx,updated_at,timestamp with time zone,YES,null,null
COLUMNS,auth,saml_providers,attribute_mapping,jsonb,YES,null,null
COLUMNS,auth,saml_providers,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,saml_providers,entity_id,text,NO,null,null
COLUMNS,auth,saml_providers,id,uuid,NO,null,null
COLUMNS,auth,saml_providers,metadata_url,text,YES,null,null
COLUMNS,auth,saml_providers,metadata_xml,text,NO,null,null
COLUMNS,auth,saml_providers,name_id_format,text,YES,null,null
COLUMNS,auth,saml_providers,sso_provider_id,uuid,NO,null,null
COLUMNS,auth,saml_providers,updated_at,timestamp with time zone,YES,null,null
COLUMNS,auth,saml_providers_entity_id_key,entity_id,text,YES,null,null
COLUMNS,auth,saml_providers_pkey,id,uuid,YES,null,null
COLUMNS,auth,saml_providers_sso_provider_id_idx,sso_provider_id,uuid,YES,null,null
COLUMNS,auth,saml_relay_states,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,saml_relay_states,flow_state_id,uuid,YES,null,null
COLUMNS,auth,saml_relay_states,for_email,text,YES,null,null
COLUMNS,auth,saml_relay_states,id,uuid,NO,null,null
COLUMNS,auth,saml_relay_states,redirect_to,text,YES,null,null
COLUMNS,auth,saml_relay_states,request_id,text,NO,null,null
COLUMNS,auth,saml_relay_states,sso_provider_id,uuid,NO,null,null
COLUMNS,auth,saml_relay_states,updated_at,timestamp with time zone,YES,null,null
COLUMNS,auth,saml_relay_states_created_at_idx,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,saml_relay_states_for_email_idx,for_email,text,YES,null,null
COLUMNS,auth,saml_relay_states_pkey,id,uuid,YES,null,null
COLUMNS,auth,saml_relay_states_sso_provider_id_idx,sso_provider_id,uuid,YES,null,null
COLUMNS,auth,schema_migrations,version,character varying(255),NO,null,null
COLUMNS,auth,schema_migrations_pkey,version,character varying(255),YES,null,null
COLUMNS,auth,sessions,aal,auth.aal_level,YES,null,null
COLUMNS,auth,sessions,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,sessions,factor_id,uuid,YES,null,null
COLUMNS,auth,sessions,id,uuid,NO,null,null
COLUMNS,auth,sessions,ip,inet,YES,null,null
COLUMNS,auth,sessions,not_after,timestamp with time zone,YES,null,null
COLUMNS,auth,sessions,oauth_client_id,uuid,YES,null,null
COLUMNS,auth,sessions,refresh_token_counter,bigint,YES,null,null
COLUMNS,auth,sessions,refresh_token_hmac_key,text,YES,null,null
COLUMNS,auth,sessions,refreshed_at,timestamp without time zone,YES,null,null
COLUMNS,auth,sessions,scopes,text,YES,null,null
COLUMNS,auth,sessions,tag,text,YES,null,null
COLUMNS,auth,sessions,updated_at,timestamp with time zone,YES,null,null
COLUMNS,auth,sessions,user_agent,text,YES,null,null
COLUMNS,auth,sessions,user_id,uuid,NO,null,null
COLUMNS,auth,sessions_not_after_idx,not_after,timestamp with time zone,YES,null,null
COLUMNS,auth,sessions_oauth_client_id_idx,oauth_client_id,uuid,YES,null,null
COLUMNS,auth,sessions_pkey,id,uuid,YES,null,null
COLUMNS,auth,sessions_user_id_idx,user_id,uuid,YES,null,null
COLUMNS,auth,sso_domains,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,sso_domains,domain,text,NO,null,null
COLUMNS,auth,sso_domains,id,uuid,NO,null,null
COLUMNS,auth,sso_domains,sso_provider_id,uuid,NO,null,null
COLUMNS,auth,sso_domains,updated_at,timestamp with time zone,YES,null,null
COLUMNS,auth,sso_domains_domain_idx,lower,text,YES,null,null
COLUMNS,auth,sso_domains_pkey,id,uuid,YES,null,null
COLUMNS,auth,sso_domains_sso_provider_id_idx,sso_provider_id,uuid,YES,null,null
COLUMNS,auth,sso_providers,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,sso_providers,disabled,boolean,YES,null,null
COLUMNS,auth,sso_providers,id,uuid,NO,null,null
COLUMNS,auth,sso_providers,resource_id,text,YES,null,null
COLUMNS,auth,sso_providers,updated_at,timestamp with time zone,YES,null,null
COLUMNS,auth,sso_providers_pkey,id,uuid,YES,null,null
COLUMNS,auth,sso_providers_resource_id_idx,lower,text,YES,null,null
COLUMNS,auth,sso_providers_resource_id_pattern_idx,resource_id,text,YES,null,null
COLUMNS,auth,unique_phone_factor_per_user,phone,text,YES,null,null
COLUMNS,auth,unique_phone_factor_per_user,user_id,uuid,YES,null,null
COLUMNS,auth,user_id_created_at_idx,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,user_id_created_at_idx,user_id,uuid,YES,null,null
COLUMNS,auth,users,aud,character varying(255),YES,null,null
COLUMNS,auth,users,banned_until,timestamp with time zone,YES,null,null
COLUMNS,auth,users,confirmation_sent_at,timestamp with time zone,YES,null,null
COLUMNS,auth,users,confirmation_token,character varying(255),YES,null,null
COLUMNS,auth,users,confirmed_at,timestamp with time zone,YES,"LEAST(email_confirmed_at, phone_confirmed_at)",GENERATED
COLUMNS,auth,users,created_at,timestamp with time zone,YES,null,null
COLUMNS,auth,users,deleted_at,timestamp with time zone,YES,null,null
COLUMNS,auth,users,email,character varying(255),YES,null,null
COLUMNS,auth,users,email_change,character varying(255),YES,null,null
COLUMNS,auth,users,email_change_confirm_status,smallint,YES,0,null
COLUMNS,auth,users,email_change_sent_at,timestamp with time zone,YES,null,null
COLUMNS,auth,users,email_change_token_current,character varying(255),YES,''::character varying,null
COLUMNS,auth,users,email_change_token_new,character varying(255),YES,null,null
COLUMNS,auth,users,email_confirmed_at,timestamp with time zone,YES,null,null
COLUMNS,auth,users,encrypted_password,character varying(255),YES,null,null
COLUMNS,auth,users,id,uuid,NO,null,null
COLUMNS,auth,users,instance_id,uuid,YES,null,null
COLUMNS,auth,users,invited_at,timestamp with time zone,YES,null,null
COLUMNS,auth,users,is_anonymous,boolean,NO,false,null
COLUMNS,auth,users,is_sso_user,boolean,NO,false,null
COLUMNS,auth,users,is_super_admin,boolean,YES,null,null
COLUMNS,auth,users,last_sign_in_at,timestamp with time zone,YES,null,null
COLUMNS,auth,users,phone,text,YES,NULL::character varying,null
COLUMNS,auth,users,phone_change,text,YES,''::character varying,null
COLUMNS,auth,users,phone_change_sent_at,timestamp with time zone,YES,null,null
COLUMNS,auth,users,phone_change_token,character varying(255),YES,''::character varying,null
COLUMNS,auth,users,phone_confirmed_at,timestamp with time zone,YES,null,null
COLUMNS,auth,users,raw_app_meta_data,jsonb,YES,null,null
COLUMNS,auth,users,raw_user_meta_data,jsonb,YES,null,null
COLUMNS,auth,users,reauthentication_sent_at,timestamp with time zone,YES,null,null
COLUMNS,auth,users,reauthentication_token,character varying(255),YES,''::character varying,null
COLUMNS,auth,users,recovery_sent_at,timestamp with time zone,YES,null,null
COLUMNS,auth,users,recovery_token,character varying(255),YES,null,null
COLUMNS,auth,users,role,character varying(255),YES,null,null
COLUMNS,auth,users,updated_at,timestamp with time zone,YES,null,null
COLUMNS,auth,users_email_partial_key,email,character varying(255),YES,null,null
COLUMNS,auth,users_instance_id_email_idx,instance_id,uuid,YES,null,null
COLUMNS,auth,users_instance_id_email_idx,lower,text,YES,null,null
COLUMNS,auth,users_instance_id_idx,instance_id,uuid,YES,null,null
COLUMNS,auth,users_is_anonymous_idx,is_anonymous,boolean,YES,null,null
COLUMNS,auth,users_phone_key,phone,text,YES,null,null
COLUMNS,auth,users_pkey,id,uuid,YES,null,null
COLUMNS,graphql,seq_schema_version,is_called,boolean,NO,null,null
COLUMNS,graphql,seq_schema_version,last_value,bigint,NO,null,null
COLUMNS,graphql,seq_schema_version,log_cnt,bigint,NO,null,null
COLUMNS,public,category_templates,category_id,uuid,NO,null,null
COLUMNS,public,category_templates,global_template_id,uuid,NO,null,null
COLUMNS,public,category_templates_pkey,category_id,uuid,YES,null,null
COLUMNS,public,category_templates_pkey,global_template_id,uuid,YES,null,null
COLUMNS,public,global_templates,archived_at,timestamp with time zone,YES,null,null
COLUMNS,public,global_templates,checklist_json,jsonb,YES,null,null
COLUMNS,public,global_templates,description,text,YES,null,null
COLUMNS,public,global_templates,id,uuid,NO,uuid_generate_v4(),null
COLUMNS,public,global_templates,interval_days,integer,YES,null,null
COLUMNS,public,global_templates,title,text,NO,null,null
COLUMNS,public,global_templates_pkey,id,uuid,YES,null,null
COLUMNS,public,group_memberships,created_at,timestamp with time zone,NO,now(),null
COLUMNS,public,group_memberships,group_id,uuid,NO,null,null
COLUMNS,public,group_memberships,user_id,uuid,NO,null,null
COLUMNS,public,group_memberships_pkey,group_id,uuid,YES,null,null
COLUMNS,public,group_memberships_pkey,user_id,uuid,YES,null,null
COLUMNS,public,group_templates,active,boolean,NO,true,null
COLUMNS,public,group_templates,archived_at,timestamp with time zone,YES,null,null
COLUMNS,public,group_templates,checklist_json,jsonb,YES,null,null
COLUMNS,public,group_templates,description,text,YES,null,null
COLUMNS,public,group_templates,group_id,uuid,NO,null,null
COLUMNS,public,group_templates,id,uuid,NO,uuid_generate_v4(),null
COLUMNS,public,group_templates,interval_days,integer,YES,null,null
COLUMNS,public,group_templates,origin_global_template_id,uuid,YES,null,null
COLUMNS,public,group_templates,title,text,NO,null,null
COLUMNS,public,group_templates_pkey,id,uuid,YES,null,null
COLUMNS,public,groups,archived_at,timestamp with time zone,YES,null,null
COLUMNS,public,groups,created_at,timestamp with time zone,NO,now(),null
COLUMNS,public,groups,id,uuid,NO,uuid_generate_v4(),null
COLUMNS,public,groups,name,text,NO,null,null
COLUMNS,public,groups,parent_group_id,uuid,YES,null,null
COLUMNS,public,groups_pkey,id,uuid,YES,null,null
COLUMNS,public,idx_groups_parent_group_id,parent_group_id,uuid,YES,null,null
COLUMNS,public,roles,id,uuid,NO,uuid_generate_v4(),null
COLUMNS,public,roles,name,text,NO,null,null
COLUMNS,public,roles_name_key,name,text,YES,null,null
COLUMNS,public,roles_pkey,id,uuid,YES,null,null
COLUMNS,public,template_categories,archived_at,timestamp with time zone,YES,null,null
COLUMNS,public,template_categories,description,text,YES,null,null
COLUMNS,public,template_categories,id,uuid,NO,uuid_generate_v4(),null
COLUMNS,public,template_categories,name,text,NO,null,null
COLUMNS,public,template_categories_pkey,id,uuid,YES,null,null
COLUMNS,public,user_roles,role_id,uuid,NO,null,null
COLUMNS,public,user_roles,user_id,uuid,NO,null,null
COLUMNS,public,user_roles_pkey,user_id,uuid,YES,null,null
COLUMNS,public,yacht_owners,user_id,uuid,NO,null,null
COLUMNS,public,yacht_owners,yacht_id,uuid,NO,null,null
COLUMNS,public,yacht_owners_pkey,user_id,uuid,YES,null,null
COLUMNS,public,yacht_owners_pkey,yacht_id,uuid,YES,null,null
COLUMNS,public,yacht_tasks,approved_at,timestamp with time zone,YES,null,null
COLUMNS,public,yacht_tasks,approved_by,uuid,YES,null,null
COLUMNS,public,yacht_tasks,checklist_json,jsonb,YES,null,null
COLUMNS,public,yacht_tasks,completed_at,timestamp with time zone,YES,null,null
COLUMNS,public,yacht_tasks,completed_by,uuid,YES,null,null
COLUMNS,public,yacht_tasks,created_at,timestamp with time zone,NO,now(),null
COLUMNS,public,yacht_tasks,deleted_at,timestamp with time zone,YES,null,null
COLUMNS,public,yacht_tasks,description,text,YES,null,null
COLUMNS,public,yacht_tasks,due_date,timestamp with time zone,YES,null,null
COLUMNS,public,yacht_tasks,group_template_id,uuid,YES,null,null
COLUMNS,public,yacht_tasks,id,uuid,NO,uuid_generate_v4(),null
COLUMNS,public,yacht_tasks,interval_days,integer,YES,null,null
COLUMNS,public,yacht_tasks,origin_global_template_id,uuid,YES,null,null
COLUMNS,public,yacht_tasks,owner_user_id,uuid,YES,null,null
COLUMNS,public,yacht_tasks,status,text,NO,null,null
COLUMNS,public,yacht_tasks,title,text,NO,null,null
COLUMNS,public,yacht_tasks,yacht_id,uuid,NO,null,null
COLUMNS,public,yacht_tasks_pkey,id,uuid,YES,null,null
COLUMNS,public,yacht_tasks_unique_open_per_yacht_global_template,origin_global_template_id,uuid,YES,null,null
COLUMNS,public,yacht_tasks_unique_open_per_yacht_global_template,yacht_id,uuid,YES,null,null
COLUMNS,public,yacht_tasks_unique_open_per_yacht_group_template,group_template_id,uuid,YES,null,null
COLUMNS,public,yacht_tasks_unique_open_per_yacht_group_template,yacht_id,uuid,YES,null,null
COLUMNS,public,yachts,archived_at,timestamp with time zone,YES,null,null
COLUMNS,public,yachts,group_id,uuid,NO,null,null
COLUMNS,public,yachts,id,uuid,NO,uuid_generate_v4(),null
COLUMNS,public,yachts,name,text,NO,null,null
COLUMNS,public,yachts_pkey,id,uuid,YES,null,null
COLUMNS,realtime,ix_realtime_subscription_entity,entity,regclass,YES,null,null
COLUMNS,realtime,messages,event,text,YES,null,null
COLUMNS,realtime,messages,extension,text,NO,null,null
COLUMNS,realtime,messages,id,uuid,NO,gen_random_uuid(),null
COLUMNS,realtime,messages,inserted_at,timestamp without time zone,NO,now(),null
COLUMNS,realtime,messages,payload,jsonb,YES,null,null
COLUMNS,realtime,messages,private,boolean,YES,false,null
COLUMNS,realtime,messages,topic,text,NO,null,null
COLUMNS,realtime,messages,updated_at,timestamp without time zone,NO,now(),null
COLUMNS,realtime,messages_inserted_at_topic_index,inserted_at,timestamp without time zone,YES,null,null
COLUMNS,realtime,messages_inserted_at_topic_index,topic,text,YES,null,null
COLUMNS,realtime,messages_pkey,id,uuid,YES,null,null
COLUMNS,realtime,messages_pkey,inserted_at,timestamp without time zone,YES,null,null
COLUMNS,realtime,pk_subscription,id,bigint,YES,null,null
COLUMNS,realtime,schema_migrations,inserted_at,timestamp(0) without time zone,YES,null,null
COLUMNS,realtime,schema_migrations,version,bigint,NO,null,null
COLUMNS,realtime,schema_migrations_pkey,version,bigint,YES,null,null
COLUMNS,realtime,subscription,action_filter,text,YES,'*'::text,null
COLUMNS,realtime,subscription,claims,jsonb,NO,null,null
COLUMNS,realtime,subscription,claims_role,regrole,NO,realtime.to_regrole((claims ->> 'role'::text)),GENERATED
COLUMNS,realtime,subscription,created_at,timestamp without time zone,NO,"timezone('utc'::text, now())",null
COLUMNS,realtime,subscription,entity,regclass,NO,null,null
COLUMNS,realtime,subscription,filters,realtime.user_defined_filter[],NO,'{}'::realtime.user_defined_filter[],null
COLUMNS,realtime,subscription,id,bigint,NO,null,null
COLUMNS,realtime,subscription,subscription_id,uuid,NO,null,null
COLUMNS,realtime,subscription_id_seq,is_called,boolean,NO,null,null
COLUMNS,realtime,subscription_id_seq,last_value,bigint,NO,null,null
COLUMNS,realtime,subscription_id_seq,log_cnt,bigint,NO,null,null
COLUMNS,realtime,subscription_subscription_id_entity_filters_action_filter_key,action_filter,text,YES,null,null
COLUMNS,realtime,subscription_subscription_id_entity_filters_action_filter_key,entity,regclass,YES,null,null
COLUMNS,realtime,subscription_subscription_id_entity_filters_action_filter_key,filters,realtime.user_defined_filter[],YES,null,null
COLUMNS,realtime,subscription_subscription_id_entity_filters_action_filter_key,subscription_id,uuid,YES,null,null
COLUMNS,realtime,user_defined_filter,column_name,text,YES,null,null
COLUMNS,realtime,user_defined_filter,op,realtime.equality_op,YES,null,null
COLUMNS,realtime,user_defined_filter,value,text,YES,null,null
COLUMNS,realtime,wal_column,is_pkey,boolean,YES,null,null
COLUMNS,realtime,wal_column,is_selectable,boolean,YES,null,null
COLUMNS,realtime,wal_column,name,text,YES,null,null
COLUMNS,realtime,wal_column,type_name,text,YES,null,null
COLUMNS,realtime,wal_column,type_oid,oid,YES,null,null
COLUMNS,realtime,wal_column,value,jsonb,YES,null,null
COLUMNS,realtime,wal_rls,errors,text[],YES,null,null
COLUMNS,realtime,wal_rls,is_rls_enabled,boolean,YES,null,null
COLUMNS,realtime,wal_rls,subscription_ids,uuid[],YES,null,null
COLUMNS,realtime,wal_rls,wal,jsonb,YES,null,null
COLUMNS,storage,bname,name,text,YES,null,null
COLUMNS,storage,bucketid_objname,bucket_id,text,YES,null,null
COLUMNS,storage,bucketid_objname,name,text,YES,null,null
COLUMNS,storage,buckets,allowed_mime_types,text[],YES,null,null
COLUMNS,storage,buckets,avif_autodetection,boolean,YES,false,null
COLUMNS,storage,buckets,created_at,timestamp with time zone,YES,now(),null
COLUMNS,storage,buckets,file_size_limit,bigint,YES,null,null
COLUMNS,storage,buckets,id,text,NO,null,null
COLUMNS,storage,buckets,name,text,NO,null,null
COLUMNS,storage,buckets,owner,uuid,YES,null,null
COLUMNS,storage,buckets,owner_id,text,YES,null,null
COLUMNS,storage,buckets,public,boolean,YES,false,null
COLUMNS,storage,buckets,type,storage.buckettype,NO,'STANDARD'::storage.buckettype,null
COLUMNS,storage,buckets,updated_at,timestamp with time zone,YES,now(),null
COLUMNS,storage,buckets_analytics,created_at,timestamp with time zone,NO,now(),null
COLUMNS,storage,buckets_analytics,deleted_at,timestamp with time zone,YES,null,null
COLUMNS,storage,buckets_analytics,format,text,NO,'ICEBERG'::text,null
COLUMNS,storage,buckets_analytics,id,uuid,NO,gen_random_uuid(),null
COLUMNS,storage,buckets_analytics,name,text,NO,null,null
COLUMNS,storage,buckets_analytics,type,storage.buckettype,NO,'ANALYTICS'::storage.buckettype,null
COLUMNS,storage,buckets_analytics,updated_at,timestamp with time zone,NO,now(),null
COLUMNS,storage,buckets_analytics_pkey,id,uuid,YES,null,null
COLUMNS,storage,buckets_analytics_unique_name_idx,name,text,YES,null,null
COLUMNS,storage,buckets_pkey,id,text,YES,null,null
COLUMNS,storage,buckets_vectors,created_at,timestamp with time zone,NO,now(),null
COLUMNS,storage,buckets_vectors,id,text,NO,null,null
COLUMNS,storage,buckets_vectors,type,storage.buckettype,NO,'VECTOR'::storage.buckettype,null
COLUMNS,storage,buckets_vectors,updated_at,timestamp with time zone,NO,now(),null
COLUMNS,storage,buckets_vectors_pkey,id,text,YES,null,null
COLUMNS,storage,idx_multipart_uploads_list,bucket_id,text,YES,null,null
COLUMNS,storage,idx_multipart_uploads_list,created_at,timestamp with time zone,YES,null,null
COLUMNS,storage,idx_multipart_uploads_list,key,text,YES,null,null
COLUMNS,storage,idx_objects_bucket_id_name,bucket_id,text,YES,null,null
COLUMNS,storage,idx_objects_bucket_id_name,name,text,YES,null,null
COLUMNS,storage,idx_objects_bucket_id_name_lower,bucket_id,text,YES,null,null
COLUMNS,storage,idx_objects_bucket_id_name_lower,lower,text,YES,null,null
COLUMNS,storage,migrations,executed_at,timestamp without time zone,YES,CURRENT_TIMESTAMP,null
COLUMNS,storage,migrations,hash,character varying(40),NO,null,null
COLUMNS,storage,migrations,id,integer,NO,null,null
COLUMNS,storage,migrations,name,character varying(100),NO,null,null
COLUMNS,storage,migrations_name_key,name,character varying(100),YES,null,null
COLUMNS,storage,migrations_pkey,id,integer,YES,null,null
COLUMNS,storage,name_prefix_search,name,text,YES,null,null
COLUMNS,storage,objects,bucket_id,text,YES,null,null
COLUMNS,storage,objects,created_at,timestamp with time zone,YES,now(),null
COLUMNS,storage,objects,id,uuid,NO,gen_random_uuid(),null
COLUMNS,storage,objects,last_accessed_at,timestamp with time zone,YES,now(),null
COLUMNS,storage,objects,metadata,jsonb,YES,null,null
COLUMNS,storage,objects,name,text,YES,null,null
COLUMNS,storage,objects,owner,uuid,YES,null,null
COLUMNS,storage,objects,owner_id,text,YES,null,null
COLUMNS,storage,objects,path_tokens,text[],YES,"string_to_array(name, '/'::text)",GENERATED
COLUMNS,storage,objects,updated_at,timestamp with time zone,YES,now(),null
COLUMNS,storage,objects,user_metadata,jsonb,YES,null,null
COLUMNS,storage,objects,version,text,YES,null,null
COLUMNS,storage,objects_pkey,id,uuid,YES,null,null
COLUMNS,storage,s3_multipart_uploads,bucket_id,text,NO,null,null
COLUMNS,storage,s3_multipart_uploads,created_at,timestamp with time zone,NO,now(),null
COLUMNS,storage,s3_multipart_uploads,id,text,NO,null,null
COLUMNS,storage,s3_multipart_uploads,in_progress_size,bigint,NO,0,null
COLUMNS,storage,s3_multipart_uploads,key,text,NO,null,null
COLUMNS,storage,s3_multipart_uploads,owner_id,text,YES,null,null
COLUMNS,storage,s3_multipart_uploads,upload_signature,text,NO,null,null
COLUMNS,storage,s3_multipart_uploads,user_metadata,jsonb,YES,null,null
COLUMNS,storage,s3_multipart_uploads,version,text,NO,null,null
COLUMNS,storage,s3_multipart_uploads_parts,bucket_id,text,NO,null,null
COLUMNS,storage,s3_multipart_uploads_parts,created_at,timestamp with time zone,NO,now(),null
COLUMNS,storage,s3_multipart_uploads_parts,etag,text,NO,null,null
COLUMNS,storage,s3_multipart_uploads_parts,id,uuid,NO,gen_random_uuid(),null
COLUMNS,storage,s3_multipart_uploads_parts,key,text,NO,null,null
COLUMNS,storage,s3_multipart_uploads_parts,owner_id,text,YES,null,null
COLUMNS,storage,s3_multipart_uploads_parts,part_number,integer,NO,null,null
COLUMNS,storage,s3_multipart_uploads_parts,size,bigint,NO,0,null
COLUMNS,storage,s3_multipart_uploads_parts,upload_id,text,NO,null,null
COLUMNS,storage,s3_multipart_uploads_parts,version,text,NO,null,null
COLUMNS,storage,s3_multipart_uploads_parts_pkey,id,uuid,YES,null,null
COLUMNS,storage,s3_multipart_uploads_pkey,id,text,YES,null,null
COLUMNS,storage,vector_indexes,bucket_id,text,NO,null,null
COLUMNS,storage,vector_indexes,created_at,timestamp with time zone,NO,now(),null
COLUMNS,storage,vector_indexes,data_type,text,NO,null,null
COLUMNS,storage,vector_indexes,dimension,integer,NO,null,null
COLUMNS,storage,vector_indexes,distance_metric,text,NO,null,null
COLUMNS,storage,vector_indexes,id,text,NO,gen_random_uuid(),null
COLUMNS,storage,vector_indexes,metadata_configuration,jsonb,YES,null,null
COLUMNS,storage,vector_indexes,name,text,NO,null,null
COLUMNS,storage,vector_indexes,updated_at,timestamp with time zone,NO,now(),null
COLUMNS,storage,vector_indexes_name_bucket_id_idx,bucket_id,text,YES,null,null
COLUMNS,storage,vector_indexes_name_bucket_id_idx,name,text,YES,null,null
COLUMNS,storage,vector_indexes_pkey,id,text,YES,null,null
COLUMNS,vault,decrypted_secrets,created_at,timestamp with time zone,YES,null,null
COLUMNS,vault,decrypted_secrets,decrypted_secret,text,YES,null,null
COLUMNS,vault,decrypted_secrets,description,text,YES,null,null
COLUMNS,vault,decrypted_secrets,id,uuid,YES,null,null
COLUMNS,vault,decrypted_secrets,key_id,uuid,YES,null,null
COLUMNS,vault,decrypted_secrets,name,text,YES,null,null
COLUMNS,vault,decrypted_secrets,nonce,bytea,YES,null,null
COLUMNS,vault,decrypted_secrets,secret,text,YES,null,null
COLUMNS,vault,decrypted_secrets,updated_at,timestamp with time zone,YES,null,null
COLUMNS,vault,secrets,created_at,timestamp with time zone,NO,CURRENT_TIMESTAMP,null
COLUMNS,vault,secrets,description,text,NO,''::text,null
COLUMNS,vault,secrets,id,uuid,NO,gen_random_uuid(),null
COLUMNS,vault,secrets,key_id,uuid,YES,null,null
COLUMNS,vault,secrets,name,text,YES,null,null
COLUMNS,vault,secrets,nonce,bytea,YES,vault._crypto_aead_det_noncegen(),null
COLUMNS,vault,secrets,secret,text,NO,null,null
COLUMNS,vault,secrets,updated_at,timestamp with time zone,NO,CURRENT_TIMESTAMP,null
COLUMNS,vault,secrets_name_idx,name,text,YES,null,null
COLUMNS,vault,secrets_pkey,id,uuid,YES,null,null
CONSTRAINTS,auth,audit_log_entries,audit_log_entries_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,flow_state,flow_state_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,identities,identities_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,identities,identities_provider_id_provider_unique,u,"UNIQUE (provider_id, provider)",null,null
CONSTRAINTS,auth,identities,identities_user_id_fkey,f,FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,instances,instances_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,mfa_amr_claims,amr_id_pk,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,mfa_amr_claims,mfa_amr_claims_session_id_authentication_method_pkey,u,"UNIQUE (session_id, authentication_method)",null,null
CONSTRAINTS,auth,mfa_amr_claims,mfa_amr_claims_session_id_fkey,f,FOREIGN KEY (session_id) REFERENCES auth.sessions(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,mfa_challenges,mfa_challenges_auth_factor_id_fkey,f,FOREIGN KEY (factor_id) REFERENCES auth.mfa_factors(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,mfa_challenges,mfa_challenges_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,mfa_factors,mfa_factors_last_challenged_at_key,u,UNIQUE (last_challenged_at),null,null
CONSTRAINTS,auth,mfa_factors,mfa_factors_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,mfa_factors,mfa_factors_user_id_fkey,f,FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,oauth_authorizations,oauth_authorizations_authorization_code_key,u,UNIQUE (authorization_code),null,null
CONSTRAINTS,auth,oauth_authorizations,oauth_authorizations_authorization_code_length,c,CHECK ((char_length(authorization_code) <= 255)),null,null
CONSTRAINTS,auth,oauth_authorizations,oauth_authorizations_authorization_id_key,u,UNIQUE (authorization_id),null,null
CONSTRAINTS,auth,oauth_authorizations,oauth_authorizations_client_id_fkey,f,FOREIGN KEY (client_id) REFERENCES auth.oauth_clients(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,oauth_authorizations,oauth_authorizations_code_challenge_length,c,CHECK ((char_length(code_challenge) <= 128)),null,null
CONSTRAINTS,auth,oauth_authorizations,oauth_authorizations_expires_at_future,c,CHECK ((expires_at > created_at)),null,null
CONSTRAINTS,auth,oauth_authorizations,oauth_authorizations_nonce_length,c,CHECK ((char_length(nonce) <= 255)),null,null
CONSTRAINTS,auth,oauth_authorizations,oauth_authorizations_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,oauth_authorizations,oauth_authorizations_redirect_uri_length,c,CHECK ((char_length(redirect_uri) <= 2048)),null,null
CONSTRAINTS,auth,oauth_authorizations,oauth_authorizations_resource_length,c,CHECK ((char_length(resource) <= 2048)),null,null
CONSTRAINTS,auth,oauth_authorizations,oauth_authorizations_scope_length,c,CHECK ((char_length(scope) <= 4096)),null,null
CONSTRAINTS,auth,oauth_authorizations,oauth_authorizations_state_length,c,CHECK ((char_length(state) <= 4096)),null,null
CONSTRAINTS,auth,oauth_authorizations,oauth_authorizations_user_id_fkey,f,FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,oauth_client_states,oauth_client_states_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,oauth_clients,oauth_clients_client_name_length,c,CHECK ((char_length(client_name) <= 1024)),null,null
CONSTRAINTS,auth,oauth_clients,oauth_clients_client_uri_length,c,CHECK ((char_length(client_uri) <= 2048)),null,null
CONSTRAINTS,auth,oauth_clients,oauth_clients_logo_uri_length,c,CHECK ((char_length(logo_uri) <= 2048)),null,null
CONSTRAINTS,auth,oauth_clients,oauth_clients_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,oauth_clients,oauth_clients_token_endpoint_auth_method_check,c,"CHECK ((token_endpoint_auth_method = ANY (ARRAY['client_secret_basic'::text, 'client_secret_post'::text, 'none'::text])))",null,null
CONSTRAINTS,auth,oauth_consents,oauth_consents_client_id_fkey,f,FOREIGN KEY (client_id) REFERENCES auth.oauth_clients(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,oauth_consents,oauth_consents_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,oauth_consents,oauth_consents_revoked_after_granted,c,CHECK (((revoked_at IS NULL) OR (revoked_at >= granted_at))),null,null
CONSTRAINTS,auth,oauth_consents,oauth_consents_scopes_length,c,CHECK ((char_length(scopes) <= 2048)),null,null
CONSTRAINTS,auth,oauth_consents,oauth_consents_scopes_not_empty,c,CHECK ((char_length(TRIM(BOTH FROM scopes)) > 0)),null,null
CONSTRAINTS,auth,oauth_consents,oauth_consents_user_client_unique,u,"UNIQUE (user_id, client_id)",null,null
CONSTRAINTS,auth,oauth_consents,oauth_consents_user_id_fkey,f,FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,one_time_tokens,one_time_tokens_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,one_time_tokens,one_time_tokens_token_hash_check,c,CHECK ((char_length(token_hash) > 0)),null,null
CONSTRAINTS,auth,one_time_tokens,one_time_tokens_user_id_fkey,f,FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,refresh_tokens,refresh_tokens_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,refresh_tokens,refresh_tokens_session_id_fkey,f,FOREIGN KEY (session_id) REFERENCES auth.sessions(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,refresh_tokens,refresh_tokens_token_unique,u,UNIQUE (token),null,null
CONSTRAINTS,auth,saml_providers,entity_id not empty,c,CHECK ((char_length(entity_id) > 0)),null,null
CONSTRAINTS,auth,saml_providers,metadata_url not empty,c,CHECK (((metadata_url = NULL::text) OR (char_length(metadata_url) > 0))),null,null
CONSTRAINTS,auth,saml_providers,metadata_xml not empty,c,CHECK ((char_length(metadata_xml) > 0)),null,null
CONSTRAINTS,auth,saml_providers,saml_providers_entity_id_key,u,UNIQUE (entity_id),null,null
CONSTRAINTS,auth,saml_providers,saml_providers_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,saml_providers,saml_providers_sso_provider_id_fkey,f,FOREIGN KEY (sso_provider_id) REFERENCES auth.sso_providers(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,saml_relay_states,request_id not empty,c,CHECK ((char_length(request_id) > 0)),null,null
CONSTRAINTS,auth,saml_relay_states,saml_relay_states_flow_state_id_fkey,f,FOREIGN KEY (flow_state_id) REFERENCES auth.flow_state(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,saml_relay_states,saml_relay_states_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,saml_relay_states,saml_relay_states_sso_provider_id_fkey,f,FOREIGN KEY (sso_provider_id) REFERENCES auth.sso_providers(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,schema_migrations,schema_migrations_pkey,p,PRIMARY KEY (version),null,null
CONSTRAINTS,auth,sessions,sessions_oauth_client_id_fkey,f,FOREIGN KEY (oauth_client_id) REFERENCES auth.oauth_clients(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,sessions,sessions_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,sessions,sessions_scopes_length,c,CHECK ((char_length(scopes) <= 4096)),null,null
CONSTRAINTS,auth,sessions,sessions_user_id_fkey,f,FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,sso_domains,domain not empty,c,CHECK ((char_length(domain) > 0)),null,null
CONSTRAINTS,auth,sso_domains,sso_domains_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,sso_domains,sso_domains_sso_provider_id_fkey,f,FOREIGN KEY (sso_provider_id) REFERENCES auth.sso_providers(id) ON DELETE CASCADE,null,null
CONSTRAINTS,auth,sso_providers,resource_id not empty,c,CHECK (((resource_id = NULL::text) OR (char_length(resource_id) > 0))),null,null
CONSTRAINTS,auth,sso_providers,sso_providers_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,auth,users,users_email_change_confirm_status_check,c,CHECK (((email_change_confirm_status >= 0) AND (email_change_confirm_status <= 2))),null,null
CONSTRAINTS,auth,users,users_phone_key,u,UNIQUE (phone),null,null
CONSTRAINTS,auth,users,users_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,public,category_templates,category_templates_category_id_fkey,f,FOREIGN KEY (category_id) REFERENCES template_categories(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,category_templates,category_templates_global_template_id_fkey,f,FOREIGN KEY (global_template_id) REFERENCES global_templates(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,category_templates,category_templates_pkey,p,"PRIMARY KEY (category_id, global_template_id)",null,null
CONSTRAINTS,public,global_templates,global_templates_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,public,group_memberships,group_memberships_group_id_fkey,f,FOREIGN KEY (group_id) REFERENCES groups(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,group_memberships,group_memberships_pkey,p,"PRIMARY KEY (user_id, group_id)",null,null
CONSTRAINTS,public,group_memberships,group_memberships_user_id_fkey,f,FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,group_templates,group_templates_group_id_fkey,f,FOREIGN KEY (group_id) REFERENCES groups(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,group_templates,group_templates_origin_global_template_id_fkey,f,FOREIGN KEY (origin_global_template_id) REFERENCES global_templates(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,group_templates,group_templates_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,public,groups,groups_parent_group_id_fkey,f,FOREIGN KEY (parent_group_id) REFERENCES groups(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,groups,groups_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,public,roles,roles_name_key,u,UNIQUE (name),null,null
CONSTRAINTS,public,roles,roles_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,public,template_categories,template_categories_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,public,user_roles,user_roles_pkey,p,PRIMARY KEY (user_id),null,null
CONSTRAINTS,public,user_roles,user_roles_role_id_fkey,f,FOREIGN KEY (role_id) REFERENCES roles(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,user_roles,user_roles_user_id_fkey,f,FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,yacht_owners,yacht_owners_pkey,p,"PRIMARY KEY (yacht_id, user_id)",null,null
CONSTRAINTS,public,yacht_owners,yacht_owners_user_id_fkey,f,FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,yacht_owners,yacht_owners_yacht_id_fkey,f,FOREIGN KEY (yacht_id) REFERENCES yachts(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,yacht_tasks,yacht_tasks_approved_by_fkey,f,FOREIGN KEY (approved_by) REFERENCES auth.users(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,yacht_tasks,yacht_tasks_completed_by_fkey,f,FOREIGN KEY (completed_by) REFERENCES auth.users(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,yacht_tasks,yacht_tasks_group_template_id_fkey,f,FOREIGN KEY (group_template_id) REFERENCES group_templates(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,yacht_tasks,yacht_tasks_origin_global_template_id_fkey,f,FOREIGN KEY (origin_global_template_id) REFERENCES global_templates(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,yacht_tasks,yacht_tasks_owner_user_id_fkey,f,FOREIGN KEY (owner_user_id) REFERENCES auth.users(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,yacht_tasks,yacht_tasks_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,public,yacht_tasks,yacht_tasks_status_check,c,"CHECK ((status = ANY (ARRAY['open'::text, 'pending_review'::text, 'approved'::text])))",null,null
CONSTRAINTS,public,yacht_tasks,yacht_tasks_yacht_id_fkey,f,FOREIGN KEY (yacht_id) REFERENCES yachts(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,yachts,yachts_group_id_fkey,f,FOREIGN KEY (group_id) REFERENCES groups(id) ON DELETE RESTRICT,null,null
CONSTRAINTS,public,yachts,yachts_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,realtime,messages,messages_pkey,p,"PRIMARY KEY (id, inserted_at)",null,null
CONSTRAINTS,realtime,schema_migrations,schema_migrations_pkey,p,PRIMARY KEY (version),null,null
CONSTRAINTS,realtime,subscription,pk_subscription,p,PRIMARY KEY (id),null,null
CONSTRAINTS,realtime,subscription,subscription_action_filter_check,c,"CHECK ((action_filter = ANY (ARRAY['*'::text, 'INSERT'::text, 'UPDATE'::text, 'DELETE'::text])))",null,null
CONSTRAINTS,storage,buckets,buckets_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,storage,buckets_analytics,buckets_analytics_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,storage,buckets_vectors,buckets_vectors_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,storage,migrations,migrations_name_key,u,UNIQUE (name),null,null
CONSTRAINTS,storage,migrations,migrations_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,storage,objects,objects_bucketId_fkey,f,FOREIGN KEY (bucket_id) REFERENCES storage.buckets(id),null,null
CONSTRAINTS,storage,objects,objects_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,storage,s3_multipart_uploads,s3_multipart_uploads_bucket_id_fkey,f,FOREIGN KEY (bucket_id) REFERENCES storage.buckets(id),null,null
CONSTRAINTS,storage,s3_multipart_uploads,s3_multipart_uploads_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,storage,s3_multipart_uploads_parts,s3_multipart_uploads_parts_bucket_id_fkey,f,FOREIGN KEY (bucket_id) REFERENCES storage.buckets(id),null,null
CONSTRAINTS,storage,s3_multipart_uploads_parts,s3_multipart_uploads_parts_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,storage,s3_multipart_uploads_parts,s3_multipart_uploads_parts_upload_id_fkey,f,FOREIGN KEY (upload_id) REFERENCES storage.s3_multipart_uploads(id) ON DELETE CASCADE,null,null
CONSTRAINTS,storage,vector_indexes,vector_indexes_bucket_id_fkey,f,FOREIGN KEY (bucket_id) REFERENCES storage.buckets_vectors(id),null,null
CONSTRAINTS,storage,vector_indexes,vector_indexes_pkey,p,PRIMARY KEY (id),null,null
CONSTRAINTS,vault,secrets,secrets_pkey,p,PRIMARY KEY (id),null,null
ENUMS,auth,aal_level,aal1,null,null,null,null
ENUMS,auth,aal_level,aal2,null,null,null,null
ENUMS,auth,aal_level,aal3,null,null,null,null
ENUMS,auth,code_challenge_method,plain,null,null,null,null
ENUMS,auth,code_challenge_method,s256,null,null,null,null
ENUMS,auth,factor_status,unverified,null,null,null,null
ENUMS,auth,factor_status,verified,null,null,null,null
ENUMS,auth,factor_type,phone,null,null,null,null
ENUMS,auth,factor_type,totp,null,null,null,null
ENUMS,auth,factor_type,webauthn,null,null,null,null
ENUMS,auth,oauth_authorization_status,approved,null,null,null,null
ENUMS,auth,oauth_authorization_status,denied,null,null,null,null
ENUMS,auth,oauth_authorization_status,expired,null,null,null,null
ENUMS,auth,oauth_authorization_status,pending,null,null,null,null
ENUMS,auth,oauth_client_type,confidential,null,null,null,null
ENUMS,auth,oauth_client_type,public,null,null,null,null
ENUMS,auth,oauth_registration_type,dynamic,null,null,null,null
ENUMS,auth,oauth_registration_type,manual,null,null,null,null
ENUMS,auth,oauth_response_type,code,null,null,null,null
ENUMS,auth,one_time_token_type,confirmation_token,null,null,null,null
ENUMS,auth,one_time_token_type,email_change_token_current,null,null,null,null
ENUMS,auth,one_time_token_type,email_change_token_new,null,null,null,null
ENUMS,auth,one_time_token_type,phone_change_token,null,null,null,null
ENUMS,auth,one_time_token_type,reauthentication_token,null,null,null,null
ENUMS,auth,one_time_token_type,recovery_token,null,null,null,null
ENUMS,realtime,action,DELETE,null,null,null,null
ENUMS,realtime,action,ERROR,null,null,null,null
ENUMS,realtime,action,INSERT,null,null,null,null
ENUMS,realtime,action,TRUNCATE,null,null,null,null
ENUMS,realtime,action,UPDATE,null,null,null,null
ENUMS,realtime,equality_op,eq,null,null,null,null
ENUMS,realtime,equality_op,gt,null,null,null,null
ENUMS,realtime,equality_op,gte,null,null,null,null
ENUMS,realtime,equality_op,in,null,null,null,null
ENUMS,realtime,equality_op,lt,null,null,null,null
ENUMS,realtime,equality_op,lte,null,null,null,null
ENUMS,realtime,equality_op,neq,null,null,null,null
ENUMS,storage,buckettype,ANALYTICS,null,null,null,null
ENUMS,storage,buckettype,STANDARD,null,null,null,null
ENUMS,storage,buckettype,VECTOR,null,null,null,null
FUNCTIONS,auth,email,,"CREATE OR REPLACE FUNCTION auth.email()
 RETURNS text
 LANGUAGE sql
 STABLE
AS $function$
  select 
  coalesce(
    nullif(current_setting('request.jwt.claim.email', true), ''),
    (nullif(current_setting('request.jwt.claims', true), '')::jsonb ->> 'email')
  )::text
$function$
",null,null,null
FUNCTIONS,auth,jwt,,"CREATE OR REPLACE FUNCTION auth.jwt()
 RETURNS jsonb
 LANGUAGE sql
 STABLE
AS $function$
  select 
    coalesce(
        nullif(current_setting('request.jwt.claim', true), ''),
        nullif(current_setting('request.jwt.claims', true), '')
    )::jsonb
$function$
",null,null,null
FUNCTIONS,auth,role,,"CREATE OR REPLACE FUNCTION auth.role()
 RETURNS text
 LANGUAGE sql
 STABLE
AS $function$
  select 
  coalesce(
    nullif(current_setting('request.jwt.claim.role', true), ''),
    (nullif(current_setting('request.jwt.claims', true), '')::jsonb ->> 'role')
  )::text
$function$
",null,null,null
FUNCTIONS,auth,uid,,"CREATE OR REPLACE FUNCTION auth.uid()
 RETURNS uuid
 LANGUAGE sql
 STABLE
AS $function$
  select 
  coalesce(
    nullif(current_setting('request.jwt.claim.sub', true), ''),
    (nullif(current_setting('request.jwt.claims', true), '')::jsonb ->> 'sub')
  )::uuid
$function$
",null,null,null
FUNCTIONS,graphql,_internal_resolve,"query text, variables jsonb, ""operationName"" text, extensions jsonb","CREATE OR REPLACE FUNCTION graphql._internal_resolve(query text, variables jsonb DEFAULT '{}'::jsonb, ""operationName"" text DEFAULT NULL::text, extensions jsonb DEFAULT NULL::jsonb)
 RETURNS jsonb
 LANGUAGE c
AS '$libdir/pg_graphql', $function$resolve_wrapper$function$
",null,null,null
FUNCTIONS,graphql,comment_directive,comment_ text,"CREATE OR REPLACE FUNCTION graphql.comment_directive(comment_ text)
 RETURNS jsonb
 LANGUAGE sql
 IMMUTABLE
AS $function$
    /*
    comment on column public.account.name is '@graphql.name: myField'
    */
    select
        coalesce(
            (
                regexp_match(
                    comment_,
                    '@graphql\((.+)\)'
                )
            )[1]::jsonb,
            jsonb_build_object()
        )
$function$
",null,null,null
FUNCTIONS,graphql,exception,message text,"CREATE OR REPLACE FUNCTION graphql.exception(message text)
 RETURNS text
 LANGUAGE plpgsql
AS $function$
begin
    raise exception using errcode='22000', message=message;
end;
$function$
",null,null,null
FUNCTIONS,graphql,get_schema_version,,"CREATE OR REPLACE FUNCTION graphql.get_schema_version()
 RETURNS integer
 LANGUAGE sql
 SECURITY DEFINER
AS $function$
    select last_value from graphql.seq_schema_version;
$function$
",null,null,null
FUNCTIONS,graphql,increment_schema_version,,"CREATE OR REPLACE FUNCTION graphql.increment_schema_version()
 RETURNS event_trigger
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
begin
    perform pg_catalog.nextval('graphql.seq_schema_version');
end;
$function$
",null,null,null
FUNCTIONS,graphql,resolve,"query text, variables jsonb, ""operationName"" text, extensions jsonb","CREATE OR REPLACE FUNCTION graphql.resolve(query text, variables jsonb DEFAULT '{}'::jsonb, ""operationName"" text DEFAULT NULL::text, extensions jsonb DEFAULT NULL::jsonb)
 RETURNS jsonb
 LANGUAGE plpgsql
AS $function$
declare
    res jsonb;
    message_text text;
begin
  begin
    select graphql._internal_resolve(""query"" := ""query"",
                                     ""variables"" := ""variables"",
                                     ""operationName"" := ""operationName"",
                                     ""extensions"" := ""extensions"") into res;
    return res;
  exception
    when others then
    get stacked diagnostics message_text = message_text;
    return
    jsonb_build_object('data', null,
                       'errors', jsonb_build_array(jsonb_build_object('message', message_text)));
  end;
end;
$function$
",null,null,null
FUNCTIONS,graphql_public,graphql,"""operationName"" text, query text, variables jsonb, extensions jsonb","CREATE OR REPLACE FUNCTION graphql_public.graphql(""operationName"" text DEFAULT NULL::text, query text DEFAULT NULL::text, variables jsonb DEFAULT NULL::jsonb, extensions jsonb DEFAULT NULL::jsonb)
 RETURNS jsonb
 LANGUAGE sql
AS $function$
            select graphql.resolve(
                query := query,
                variables := coalesce(variables, '{}'),
                ""operationName"" := ""operationName"",
                extensions := extensions
            );
        $function$
",null,null,null
FUNCTIONS,pgbouncer,get_auth,p_usename text,"CREATE OR REPLACE FUNCTION pgbouncer.get_auth(p_usename text)
 RETURNS TABLE(username text, password text)
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO ''
AS $function$
  BEGIN
      RAISE DEBUG 'PgBouncer auth request: %', p_usename;

      RETURN QUERY
      SELECT
          rolname::text,
          CASE WHEN rolvaliduntil < now()
              THEN null
              ELSE rolpassword::text
          END
      FROM pg_authid
      WHERE rolname=$1 and rolcanlogin;
  END;
  $function$
",null,null,null
FUNCTIONS,public,approve_yacht_task,p_task_id uuid,"CREATE OR REPLACE FUNCTION public.approve_yacht_task(p_task_id uuid)
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public', 'auth'
AS $function$
declare
v_task public.yacht_tasks%rowtype;
v_role text;
begin
select *
into v_task
from public.yacht_tasks
where id = p_task_id
for update;
if not found then
raise exception 'task not found: %', p_task_id;
end if;
v_role := public.current_user_role();
if not (
public.is_admin()
or (
v_role = 'manager'
and v_task.yacht_id in (select public.user_yacht_ids())
)
) then
raise exception 'not authorized';
end if;
if v_task.status <> 'pending_review' then
raise exception 'invalid state: expected pending_review, got %', v_task.status;
end if;
update public.yacht_tasks
set
status = 'approved',
approved_at = now(),
approved_by = auth.uid()
where id = p_task_id;
if v_task.interval_days is not null then
if v_task.completed_at is null then
raise exception 'invalid state: completed_at is null for task %', p_task_id;
end if;
insert into public.yacht_tasks (
yacht_id,
group_template_id,
origin_global_template_id,
title,
description,
interval_days,
checklist_json,
due_date,
status
)
values (
v_task.yacht_id,
v_task.group_template_id,
v_task.origin_global_template_id,
v_task.title,
v_task.description,
v_task.interval_days,
v_task.checklist_json,
v_task.completed_at + (v_task.interval_days * interval '1 day'),
'open'
)
on conflict do nothing;
end if;
end;
$function$
",null,null,null
FUNCTIONS,public,assign_category_to_yacht,"p_category_id uuid, p_yacht_id uuid","CREATE OR REPLACE FUNCTION public.assign_category_to_yacht(p_category_id uuid, p_yacht_id uuid)
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public', 'auth'
AS $function$
declare
v_role text;
begin
v_role := public.current_user_role();
if not (
public.is_admin()
or (
v_role = 'manager'
and p_yacht_id in (select public.user_yacht_ids())
)
) then
raise exception 'not authorized';
end if;
insert into public.yacht_tasks (
yacht_id,
group_template_id,
origin_global_template_id,
title,
description,
interval_days,
checklist_json,
due_date,
status
)
select
p_yacht_id,
null,
gt.id,
gt.title,
gt.description,
gt.interval_days,
gt.checklist_json,
now(),
'open'
from public.global_templates gt
join public.category_templates ct
on ct.global_template_id = gt.id
where ct.category_id = p_category_id
and not exists (
select 1
from public.yacht_tasks yt
left join public.group_templates gpt
on gpt.id = yt.group_template_id
where yt.yacht_id = p_yacht_id
and yt.deleted_at is null
and yt.status <> 'approved'
and (
yt.origin_global_template_id = gt.id
or gpt.origin_global_template_id = gt.id
)
)
on conflict do nothing;
return;
end;
$function$
",null,null,null
FUNCTIONS,public,assign_global_template_to_group,"p_global_template_id uuid, p_group_id uuid","CREATE OR REPLACE FUNCTION public.assign_global_template_to_group(p_global_template_id uuid, p_group_id uuid)
 RETURNS uuid
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public', 'auth'
AS $function$
declare
v_new_group_template_id uuid;
v_role text;
v_gt public.global_templates%rowtype;
begin
v_role := public.current_user_role();
if not (
public.is_admin()
or (
v_role = 'manager'
and p_group_id in (select public.user_group_ids())
)
) then
raise exception 'not authorized';
end if;
if exists (
select 1
from public.group_templates gt
where gt.group_id = p_group_id
and gt.origin_global_template_id = p_global_template_id
and gt.archived_at is null
) then
raise exception 'group_template already exists for global_template % and group %', p_global_template_id, p_group_id;
end if;
select *
into v_gt
from public.global_templates
where id = p_global_template_id;
if not found then
raise exception 'global_template not found: %', p_global_template_id;
end if;
insert into public.group_templates (
group_id,
origin_global_template_id,
title,
description,
interval_days,
checklist_json,
active
)
values (
p_group_id,
p_global_template_id,
v_gt.title,
v_gt.description,
v_gt.interval_days,
v_gt.checklist_json,
true
)
returning id into v_new_group_template_id;
insert into public.yacht_tasks (
yacht_id,
group_template_id,
title,
description,
interval_days,
checklist_json,
due_date,
status
)
select
y.id,
v_new_group_template_id,
gt.title,
gt.description,
gt.interval_days,
gt.checklist_json,
now(),
'open'
from public.yachts y
join public.group_templates gt
on gt.id = v_new_group_template_id
where y.group_id = p_group_id
on conflict do nothing;
return v_new_group_template_id;
end;
$function$
",null,null,null
FUNCTIONS,public,complete_yacht_task,p_task_id uuid,"CREATE OR REPLACE FUNCTION public.complete_yacht_task(p_task_id uuid)
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public', 'auth'
AS $function$
declare
v_task public.yacht_tasks%rowtype;
v_role text;
begin
select *
into v_task
from public.yacht_tasks
where id = p_task_id
for update;
if not found then
raise exception 'task not found: %', p_task_id;
end if;
v_role := public.current_user_role();
if not (
public.is_admin()
or (
v_role in ('manager','crew')
and v_task.yacht_id in (select public.user_yacht_ids())
)
) then
raise exception 'not authorized';
end if;
if v_task.status <> 'open' then
raise exception 'invalid state: expected open, got %', v_task.status;
end if;
update public.yacht_tasks
set
status = 'pending_review',
completed_at = now(),
completed_by = auth.uid()
where id = p_task_id;
end;
$function$
",null,null,null
FUNCTIONS,public,current_user_role,,"CREATE OR REPLACE FUNCTION public.current_user_role()
 RETURNS text
 LANGUAGE sql
 STABLE SECURITY DEFINER
 SET search_path TO 'public', 'auth'
AS $function$
select r.name
from public.user_roles ur
join public.roles r on r.id = ur.role_id
where ur.user_id = auth.uid()
limit 1;
$function$
",null,null,null
FUNCTIONS,public,is_admin,,"CREATE OR REPLACE FUNCTION public.is_admin()
 RETURNS boolean
 LANGUAGE sql
 STABLE SECURITY DEFINER
 SET search_path TO 'public', 'auth'
AS $function$
select exists (
select 1
from public.user_roles ur
join public.roles r on r.id = ur.role_id
where ur.user_id = auth.uid()
and r.name = 'admin'
);
$function$
",null,null,null
FUNCTIONS,public,user_group_ids,,"CREATE OR REPLACE FUNCTION public.user_group_ids()
 RETURNS SETOF uuid
 LANGUAGE plpgsql
 STABLE SECURITY DEFINER
 SET search_path TO 'public', 'auth'
AS $function$
declare
begin
  if public.is_admin() then
    return query
    select g.id
    from public.groups g;
    return;
  end if;

  return query
  with recursive group_tree as (
    select g.id
    from public.groups g
    join public.group_memberships gm
      on gm.group_id = g.id
    where gm.user_id = auth.uid()

    union all

    select child.id
    from public.groups child
    join group_tree gt
      on child.parent_group_id = gt.id
  )
  select id from group_tree;
end;
$function$
",null,null,null
FUNCTIONS,public,user_yacht_ids,,"CREATE OR REPLACE FUNCTION public.user_yacht_ids()
 RETURNS SETOF uuid
 LANGUAGE plpgsql
 STABLE SECURITY DEFINER
 SET search_path TO 'public', 'auth'
AS $function$
declare
role_name text;
begin
if public.is_admin() then
return query
select y.id
from public.yachts y;
return;
end if;
role_name := public.current_user_role();
if role_name in ('manager', 'crew') then
return query
select y.id
from public.yachts y
where y.group_id in (select public.user_group_ids());
elsif role_name = 'owner' then
return query
select yo.yacht_id
from public.yacht_owners yo
where yo.user_id = auth.uid();
else
return;
end if;
end;
$function$
",null,null,null
FUNCTIONS,realtime,apply_rls,"wal jsonb, max_record_bytes integer","CREATE OR REPLACE FUNCTION realtime.apply_rls(wal jsonb, max_record_bytes integer DEFAULT (1024 * 1024))
 RETURNS SETOF realtime.wal_rls
 LANGUAGE plpgsql
AS $function$
declare
-- Regclass of the table e.g. public.notes
entity_ regclass = (quote_ident(wal ->> 'schema') || '.' || quote_ident(wal ->> 'table'))::regclass;

-- I, U, D, T: insert, update ...
action realtime.action = (
    case wal ->> 'action'
        when 'I' then 'INSERT'
        when 'U' then 'UPDATE'
        when 'D' then 'DELETE'
        else 'ERROR'
    end
);

-- Is row level security enabled for the table
is_rls_enabled bool = relrowsecurity from pg_class where oid = entity_;

subscriptions realtime.subscription[] = array_agg(subs)
    from
        realtime.subscription subs
    where
        subs.entity = entity_
        -- Filter by action early - only get subscriptions interested in this action
        -- action_filter column can be: '*' (all), 'INSERT', 'UPDATE', or 'DELETE'
        and (subs.action_filter = '*' or subs.action_filter = action::text);

-- Subscription vars
roles regrole[] = array_agg(distinct us.claims_role::text)
    from
        unnest(subscriptions) us;

working_role regrole;
claimed_role regrole;
claims jsonb;

subscription_id uuid;
subscription_has_access bool;
visible_to_subscription_ids uuid[] = '{}';

-- structured info for wal's columns
columns realtime.wal_column[];
-- previous identity values for update/delete
old_columns realtime.wal_column[];

error_record_exceeds_max_size boolean = octet_length(wal::text) > max_record_bytes;

-- Primary jsonb output for record
output jsonb;

begin
perform set_config('role', null, true);

columns =
    array_agg(
        (
            x->>'name',
            x->>'type',
            x->>'typeoid',
            realtime.cast(
                (x->'value') #>> '{}',
                coalesce(
                    (x->>'typeoid')::regtype, -- null when wal2json version <= 2.4
                    (x->>'type')::regtype
                )
            ),
            (pks ->> 'name') is not null,
            true
        )::realtime.wal_column
    )
    from
        jsonb_array_elements(wal -> 'columns') x
        left join jsonb_array_elements(wal -> 'pk') pks
            on (x ->> 'name') = (pks ->> 'name');

old_columns =
    array_agg(
        (
            x->>'name',
            x->>'type',
            x->>'typeoid',
            realtime.cast(
                (x->'value') #>> '{}',
                coalesce(
                    (x->>'typeoid')::regtype, -- null when wal2json version <= 2.4
                    (x->>'type')::regtype
                )
            ),
            (pks ->> 'name') is not null,
            true
        )::realtime.wal_column
    )
    from
        jsonb_array_elements(wal -> 'identity') x
        left join jsonb_array_elements(wal -> 'pk') pks
            on (x ->> 'name') = (pks ->> 'name');

for working_role in select * from unnest(roles) loop

    -- Update `is_selectable` for columns and old_columns
    columns =
        array_agg(
            (
                c.name,
                c.type_name,
                c.type_oid,
                c.value,
                c.is_pkey,
                pg_catalog.has_column_privilege(working_role, entity_, c.name, 'SELECT')
            )::realtime.wal_column
        )
        from
            unnest(columns) c;

    old_columns =
            array_agg(
                (
                    c.name,
                    c.type_name,
                    c.type_oid,
                    c.value,
                    c.is_pkey,
                    pg_catalog.has_column_privilege(working_role, entity_, c.name, 'SELECT')
                )::realtime.wal_column
            )
            from
                unnest(old_columns) c;

    if action <> 'DELETE' and count(1) = 0 from unnest(columns) c where c.is_pkey then
        return next (
            jsonb_build_object(
                'schema', wal ->> 'schema',
                'table', wal ->> 'table',
                'type', action
            ),
            is_rls_enabled,
            -- subscriptions is already filtered by entity
            (select array_agg(s.subscription_id) from unnest(subscriptions) as s where claims_role = working_role),
            array['Error 400: Bad Request, no primary key']
        )::realtime.wal_rls;

    -- The claims role does not have SELECT permission to the primary key of entity
    elsif action <> 'DELETE' and sum(c.is_selectable::int) <> count(1) from unnest(columns) c where c.is_pkey then
        return next (
            jsonb_build_object(
                'schema', wal ->> 'schema',
                'table', wal ->> 'table',
                'type', action
            ),
            is_rls_enabled,
            (select array_agg(s.subscription_id) from unnest(subscriptions) as s where claims_role = working_role),
            array['Error 401: Unauthorized']
        )::realtime.wal_rls;

    else
        output = jsonb_build_object(
            'schema', wal ->> 'schema',
            'table', wal ->> 'table',
            'type', action,
            'commit_timestamp', to_char(
                ((wal ->> 'timestamp')::timestamptz at time zone 'utc'),
                'YYYY-MM-DD""T""HH24:MI:SS.MS""Z""'
            ),
            'columns', (
                select
                    jsonb_agg(
                        jsonb_build_object(
                            'name', pa.attname,
                            'type', pt.typname
                        )
                        order by pa.attnum asc
                    )
                from
                    pg_attribute pa
                    join pg_type pt
                        on pa.atttypid = pt.oid
                where
                    attrelid = entity_
                    and attnum > 0
                    and pg_catalog.has_column_privilege(working_role, entity_, pa.attname, 'SELECT')
            )
        )
        -- Add ""record"" key for insert and update
        || case
            when action in ('INSERT', 'UPDATE') then
                jsonb_build_object(
                    'record',
                    (
                        select
                            jsonb_object_agg(
                                -- if unchanged toast, get column name and value from old record
                                coalesce((c).name, (oc).name),
                                case
                                    when (c).name is null then (oc).value
                                    else (c).value
                                end
                            )
                        from
                            unnest(columns) c
                            full outer join unnest(old_columns) oc
                                on (c).name = (oc).name
                        where
                            coalesce((c).is_selectable, (oc).is_selectable)
                            and ( not error_record_exceeds_max_size or (octet_length((c).value::text) <= 64))
                    )
                )
            else '{}'::jsonb
        end
        -- Add ""old_record"" key for update and delete
        || case
            when action = 'UPDATE' then
                jsonb_build_object(
                        'old_record',
                        (
                            select jsonb_object_agg((c).name, (c).value)
                            from unnest(old_columns) c
                            where
                                (c).is_selectable
                                and ( not error_record_exceeds_max_size or (octet_length((c).value::text) <= 64))
                        )
                    )
            when action = 'DELETE' then
                jsonb_build_object(
                    'old_record',
                    (
                        select jsonb_object_agg((c).name, (c).value)
                        from unnest(old_columns) c
                        where
                            (c).is_selectable
                            and ( not error_record_exceeds_max_size or (octet_length((c).value::text) <= 64))
                            and ( not is_rls_enabled or (c).is_pkey ) -- if RLS enabled, we can't secure deletes so filter to pkey
                    )
                )
            else '{}'::jsonb
        end;

        -- Create the prepared statement
        if is_rls_enabled and action <> 'DELETE' then
            if (select 1 from pg_prepared_statements where name = 'walrus_rls_stmt' limit 1) > 0 then
                deallocate walrus_rls_stmt;
            end if;
            execute realtime.build_prepared_statement_sql('walrus_rls_stmt', entity_, columns);
        end if;

        visible_to_subscription_ids = '{}';

        for subscription_id, claims in (
                select
                    subs.subscription_id,
                    subs.claims
                from
                    unnest(subscriptions) subs
                where
                    subs.entity = entity_
                    and subs.claims_role = working_role
                    and (
                        realtime.is_visible_through_filters(columns, subs.filters)
                        or (
                          action = 'DELETE'
                          and realtime.is_visible_through_filters(old_columns, subs.filters)
                        )
                    )
        ) loop

            if not is_rls_enabled or action = 'DELETE' then
                visible_to_subscription_ids = visible_to_subscription_ids || subscription_id;
            else
                -- Check if RLS allows the role to see the record
                perform
                    -- Trim leading and trailing quotes from working_role because set_config
                    -- doesn't recognize the role as valid if they are included
                    set_config('role', trim(both '""' from working_role::text), true),
                    set_config('request.jwt.claims', claims::text, true);

                execute 'execute walrus_rls_stmt' into subscription_has_access;

                if subscription_has_access then
                    visible_to_subscription_ids = visible_to_subscription_ids || subscription_id;
                end if;
            end if;
        end loop;

        perform set_config('role', null, true);

        return next (
            output,
            is_rls_enabled,
            visible_to_subscription_ids,
            case
                when error_record_exceeds_max_size then array['Error 413: Payload Too Large']
                else '{}'
            end
        )::realtime.wal_rls;

    end if;
end loop;

perform set_config('role', null, true);
end;
$function$
",null,null,null
FUNCTIONS,realtime,broadcast_changes,"topic_name text, event_name text, operation text, table_name text, table_schema text, new record, old record, level text","CREATE OR REPLACE FUNCTION realtime.broadcast_changes(topic_name text, event_name text, operation text, table_name text, table_schema text, new record, old record, level text DEFAULT 'ROW'::text)
 RETURNS void
 LANGUAGE plpgsql
AS $function$
DECLARE
    -- Declare a variable to hold the JSONB representation of the row
    row_data jsonb := '{}'::jsonb;
BEGIN
    IF level = 'STATEMENT' THEN
        RAISE EXCEPTION 'function can only be triggered for each row, not for each statement';
    END IF;
    -- Check the operation type and handle accordingly
    IF operation = 'INSERT' OR operation = 'UPDATE' OR operation = 'DELETE' THEN
        row_data := jsonb_build_object('old_record', OLD, 'record', NEW, 'operation', operation, 'table', table_name, 'schema', table_schema);
        PERFORM realtime.send (row_data, event_name, topic_name);
    ELSE
        RAISE EXCEPTION 'Unexpected operation type: %', operation;
    END IF;
EXCEPTION
    WHEN OTHERS THEN
        RAISE EXCEPTION 'Failed to process the row: %', SQLERRM;
END;

$function$
",null,null,null
FUNCTIONS,realtime,build_prepared_statement_sql,"prepared_statement_name text, entity regclass, columns realtime.wal_column[]","CREATE OR REPLACE FUNCTION realtime.build_prepared_statement_sql(prepared_statement_name text, entity regclass, columns realtime.wal_column[])
 RETURNS text
 LANGUAGE sql
AS $function$
      /*
      Builds a sql string that, if executed, creates a prepared statement to
      tests retrive a row from *entity* by its primary key columns.
      Example
          select realtime.build_prepared_statement_sql('public.notes', '{""id""}'::text[], '{""bigint""}'::text[])
      */
          select
      'prepare ' || prepared_statement_name || ' as
          select
              exists(
                  select
                      1
                  from
                      ' || entity || '
                  where
                      ' || string_agg(quote_ident(pkc.name) || '=' || quote_nullable(pkc.value #>> '{}') , ' and ') || '
              )'
          from
              unnest(columns) pkc
          where
              pkc.is_pkey
          group by
              entity
      $function$
",null,null,null
FUNCTIONS,realtime,cast,"val text, type_ regtype","CREATE OR REPLACE FUNCTION realtime.""cast""(val text, type_ regtype)
 RETURNS jsonb
 LANGUAGE plpgsql
 IMMUTABLE
AS $function$
    declare
      res jsonb;
    begin
      execute format('select to_jsonb(%L::'|| type_::text || ')', val)  into res;
      return res;
    end
    $function$
",null,null,null
FUNCTIONS,realtime,check_equality_op,"op realtime.equality_op, type_ regtype, val_1 text, val_2 text","CREATE OR REPLACE FUNCTION realtime.check_equality_op(op realtime.equality_op, type_ regtype, val_1 text, val_2 text)
 RETURNS boolean
 LANGUAGE plpgsql
 IMMUTABLE
AS $function$
      /*
      Casts *val_1* and *val_2* as type *type_* and check the *op* condition for truthiness
      */
      declare
          op_symbol text = (
              case
                  when op = 'eq' then '='
                  when op = 'neq' then '!='
                  when op = 'lt' then '<'
                  when op = 'lte' then '<='
                  when op = 'gt' then '>'
                  when op = 'gte' then '>='
                  when op = 'in' then '= any'
                  else 'UNKNOWN OP'
              end
          );
          res boolean;
      begin
          execute format(
              'select %L::'|| type_::text || ' ' || op_symbol
              || ' ( %L::'
              || (
                  case
                      when op = 'in' then type_::text || '[]'
                      else type_::text end
              )
              || ')', val_1, val_2) into res;
          return res;
      end;
      $function$
",null,null,null
FUNCTIONS,realtime,is_visible_through_filters,"columns realtime.wal_column[], filters realtime.user_defined_filter[]","CREATE OR REPLACE FUNCTION realtime.is_visible_through_filters(columns realtime.wal_column[], filters realtime.user_defined_filter[])
 RETURNS boolean
 LANGUAGE sql
 IMMUTABLE
AS $function$
    /*
    Should the record be visible (true) or filtered out (false) after *filters* are applied
    */
        select
            -- Default to allowed when no filters present
            $2 is null -- no filters. this should not happen because subscriptions has a default
            or array_length($2, 1) is null -- array length of an empty array is null
            or bool_and(
                coalesce(
                    realtime.check_equality_op(
                        op:=f.op,
                        type_:=coalesce(
                            col.type_oid::regtype, -- null when wal2json version <= 2.4
                            col.type_name::regtype
                        ),
                        -- cast jsonb to text
                        val_1:=col.value #>> '{}',
                        val_2:=f.value
                    ),
                    false -- if null, filter does not match
                )
            )
        from
            unnest(filters) f
            join unnest(columns) col
                on f.column_name = col.name;
    $function$
",null,null,null
FUNCTIONS,realtime,list_changes,"publication name, slot_name name, max_changes integer, max_record_bytes integer","CREATE OR REPLACE FUNCTION realtime.list_changes(publication name, slot_name name, max_changes integer, max_record_bytes integer)
 RETURNS SETOF realtime.wal_rls
 LANGUAGE sql
 SET log_min_messages TO 'fatal'
AS $function$
      with pub as (
        select
          concat_ws(
            ',',
            case when bool_or(pubinsert) then 'insert' else null end,
            case when bool_or(pubupdate) then 'update' else null end,
            case when bool_or(pubdelete) then 'delete' else null end
          ) as w2j_actions,
          coalesce(
            string_agg(
              realtime.quote_wal2json(format('%I.%I', schemaname, tablename)::regclass),
              ','
            ) filter (where ppt.tablename is not null and ppt.tablename not like '% %'),
            ''
          ) w2j_add_tables
        from
          pg_publication pp
          left join pg_publication_tables ppt
            on pp.pubname = ppt.pubname
        where
          pp.pubname = publication
        group by
          pp.pubname
        limit 1
      ),
      w2j as (
        select
          x.*, pub.w2j_add_tables
        from
          pub,
          pg_logical_slot_get_changes(
            slot_name, null, max_changes,
            'include-pk', 'true',
            'include-transaction', 'false',
            'include-timestamp', 'true',
            'include-type-oids', 'true',
            'format-version', '2',
            'actions', pub.w2j_actions,
            'add-tables', pub.w2j_add_tables
          ) x
      )
      select
        xyz.wal,
        xyz.is_rls_enabled,
        xyz.subscription_ids,
        xyz.errors
      from
        w2j,
        realtime.apply_rls(
          wal := w2j.data::jsonb,
          max_record_bytes := max_record_bytes
        ) xyz(wal, is_rls_enabled, subscription_ids, errors)
      where
        w2j.w2j_add_tables <> ''
        and xyz.subscription_ids[1] is not null
    $function$
",null,null,null
FUNCTIONS,realtime,quote_wal2json,entity regclass,"CREATE OR REPLACE FUNCTION realtime.quote_wal2json(entity regclass)
 RETURNS text
 LANGUAGE sql
 IMMUTABLE STRICT
AS $function$
      select
        (
          select string_agg('' || ch,'')
          from unnest(string_to_array(nsp.nspname::text, null)) with ordinality x(ch, idx)
          where
            not (x.idx = 1 and x.ch = '""')
            and not (
              x.idx = array_length(string_to_array(nsp.nspname::text, null), 1)
              and x.ch = '""'
            )
        )
        || '.'
        || (
          select string_agg('' || ch,'')
          from unnest(string_to_array(pc.relname::text, null)) with ordinality x(ch, idx)
          where
            not (x.idx = 1 and x.ch = '""')
            and not (
              x.idx = array_length(string_to_array(nsp.nspname::text, null), 1)
              and x.ch = '""'
            )
          )
      from
        pg_class pc
        join pg_namespace nsp
          on pc.relnamespace = nsp.oid
      where
        pc.oid = entity
    $function$
",null,null,null
FUNCTIONS,realtime,send,"payload jsonb, event text, topic text, private boolean","CREATE OR REPLACE FUNCTION realtime.send(payload jsonb, event text, topic text, private boolean DEFAULT true)
 RETURNS void
 LANGUAGE plpgsql
AS $function$
DECLARE
  generated_id uuid;
  final_payload jsonb;
BEGIN
  BEGIN
    -- Generate a new UUID for the id
    generated_id := gen_random_uuid();

    -- Check if payload has an 'id' key, if not, add the generated UUID
    IF payload ? 'id' THEN
      final_payload := payload;
    ELSE
      final_payload := jsonb_set(payload, '{id}', to_jsonb(generated_id));
    END IF;

    -- Set the topic configuration
    EXECUTE format('SET LOCAL realtime.topic TO %L', topic);

    -- Attempt to insert the message
    INSERT INTO realtime.messages (id, payload, event, topic, private, extension)
    VALUES (generated_id, final_payload, event, topic, private, 'broadcast');
  EXCEPTION
    WHEN OTHERS THEN
      -- Capture and notify the error
      RAISE WARNING 'ErrorSendingBroadcastMessage: %', SQLERRM;
  END;
END;
$function$
",null,null,null
FUNCTIONS,realtime,subscription_check_filters,,"CREATE OR REPLACE FUNCTION realtime.subscription_check_filters()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
    /*
    Validates that the user defined filters for a subscription:
    - refer to valid columns that the claimed role may access
    - values are coercable to the correct column type
    */
    declare
        col_names text[] = coalesce(
                array_agg(c.column_name order by c.ordinal_position),
                '{}'::text[]
            )
            from
                information_schema.columns c
            where
                format('%I.%I', c.table_schema, c.table_name)::regclass = new.entity
                and pg_catalog.has_column_privilege(
                    (new.claims ->> 'role'),
                    format('%I.%I', c.table_schema, c.table_name)::regclass,
                    c.column_name,
                    'SELECT'
                );
        filter realtime.user_defined_filter;
        col_type regtype;

        in_val jsonb;
    begin
        for filter in select * from unnest(new.filters) loop
            -- Filtered column is valid
            if not filter.column_name = any(col_names) then
                raise exception 'invalid column for filter %', filter.column_name;
            end if;

            -- Type is sanitized and safe for string interpolation
            col_type = (
                select atttypid::regtype
                from pg_catalog.pg_attribute
                where attrelid = new.entity
                      and attname = filter.column_name
            );
            if col_type is null then
                raise exception 'failed to lookup type for column %', filter.column_name;
            end if;

            -- Set maximum number of entries for in filter
            if filter.op = 'in'::realtime.equality_op then
                in_val = realtime.cast(filter.value, (col_type::text || '[]')::regtype);
                if coalesce(jsonb_array_length(in_val), 0) > 100 then
                    raise exception 'too many values for `in` filter. Maximum 100';
                end if;
            else
                -- raises an exception if value is not coercable to type
                perform realtime.cast(filter.value, col_type);
            end if;

        end loop;

        -- Apply consistent order to filters so the unique constraint on
        -- (subscription_id, entity, filters) can't be tricked by a different filter order
        new.filters = coalesce(
            array_agg(f order by f.column_name, f.op, f.value),
            '{}'
        ) from unnest(new.filters) f;

        return new;
    end;
    $function$
",null,null,null
FUNCTIONS,realtime,to_regrole,role_name text,"CREATE OR REPLACE FUNCTION realtime.to_regrole(role_name text)
 RETURNS regrole
 LANGUAGE sql
 IMMUTABLE
AS $function$ select role_name::regrole $function$
",null,null,null
FUNCTIONS,realtime,topic,,"CREATE OR REPLACE FUNCTION realtime.topic()
 RETURNS text
 LANGUAGE sql
 STABLE
AS $function$
select nullif(current_setting('realtime.topic', true), '')::text;
$function$
",null,null,null
FUNCTIONS,storage,can_insert_object,"bucketid text, name text, owner uuid, metadata jsonb","CREATE OR REPLACE FUNCTION storage.can_insert_object(bucketid text, name text, owner uuid, metadata jsonb)
 RETURNS void
 LANGUAGE plpgsql
AS $function$
BEGIN
  INSERT INTO ""storage"".""objects"" (""bucket_id"", ""name"", ""owner"", ""metadata"") VALUES (bucketid, name, owner, metadata);
  -- hack to rollback the successful insert
  RAISE sqlstate 'PT200' using
  message = 'ROLLBACK',
  detail = 'rollback successful insert';
END
$function$
",null,null,null
FUNCTIONS,storage,enforce_bucket_name_length,,"CREATE OR REPLACE FUNCTION storage.enforce_bucket_name_length()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
begin
    if length(new.name) > 100 then
        raise exception 'bucket name ""%"" is too long (% characters). Max is 100.', new.name, length(new.name);
    end if;
    return new;
end;
$function$
",null,null,null
FUNCTIONS,storage,extension,name text,"CREATE OR REPLACE FUNCTION storage.extension(name text)
 RETURNS text
 LANGUAGE plpgsql
AS $function$
DECLARE
_parts text[];
_filename text;
BEGIN
	select string_to_array(name, '/') into _parts;
	select _parts[array_length(_parts,1)] into _filename;
	-- @todo return the last part instead of 2
	return reverse(split_part(reverse(_filename), '.', 1));
END
$function$
",null,null,null
FUNCTIONS,storage,filename,name text,"CREATE OR REPLACE FUNCTION storage.filename(name text)
 RETURNS text
 LANGUAGE plpgsql
AS $function$
DECLARE
_parts text[];
BEGIN
	select string_to_array(name, '/') into _parts;
	return _parts[array_length(_parts,1)];
END
$function$
",null,null,null
FUNCTIONS,storage,foldername,name text,"CREATE OR REPLACE FUNCTION storage.foldername(name text)
 RETURNS text[]
 LANGUAGE plpgsql
AS $function$
DECLARE
_parts text[];
BEGIN
	select string_to_array(name, '/') into _parts;
	return _parts[1:array_length(_parts,1)-1];
END
$function$
",null,null,null
FUNCTIONS,storage,get_common_prefix,"p_key text, p_prefix text, p_delimiter text","CREATE OR REPLACE FUNCTION storage.get_common_prefix(p_key text, p_prefix text, p_delimiter text)
 RETURNS text
 LANGUAGE sql
 IMMUTABLE
AS $function$
SELECT CASE
    WHEN position(p_delimiter IN substring(p_key FROM length(p_prefix) + 1)) > 0
    THEN left(p_key, length(p_prefix) + position(p_delimiter IN substring(p_key FROM length(p_prefix) + 1)))
    ELSE NULL
END;
$function$
",null,null,null
FUNCTIONS,storage,get_size_by_bucket,,"CREATE OR REPLACE FUNCTION storage.get_size_by_bucket()
 RETURNS TABLE(size bigint, bucket_id text)
 LANGUAGE plpgsql
AS $function$
BEGIN
    return query
        select sum((metadata->>'size')::int) as size, obj.bucket_id
        from ""storage"".objects as obj
        group by obj.bucket_id;
END
$function$
",null,null,null
FUNCTIONS,storage,list_multipart_uploads_with_delimiter,"bucket_id text, prefix_param text, delimiter_param text, max_keys integer, next_key_token text, next_upload_token text","CREATE OR REPLACE FUNCTION storage.list_multipart_uploads_with_delimiter(bucket_id text, prefix_param text, delimiter_param text, max_keys integer DEFAULT 100, next_key_token text DEFAULT ''::text, next_upload_token text DEFAULT ''::text)
 RETURNS TABLE(key text, id text, created_at timestamp with time zone)
 LANGUAGE plpgsql
AS $function$
BEGIN
    RETURN QUERY EXECUTE
        'SELECT DISTINCT ON(key COLLATE ""C"") * from (
            SELECT
                CASE
                    WHEN position($2 IN substring(key from length($1) + 1)) > 0 THEN
                        substring(key from 1 for length($1) + position($2 IN substring(key from length($1) + 1)))
                    ELSE
                        key
                END AS key, id, created_at
            FROM
                storage.s3_multipart_uploads
            WHERE
                bucket_id = $5 AND
                key ILIKE $1 || ''%'' AND
                CASE
                    WHEN $4 != '''' AND $6 = '''' THEN
                        CASE
                            WHEN position($2 IN substring(key from length($1) + 1)) > 0 THEN
                                substring(key from 1 for length($1) + position($2 IN substring(key from length($1) + 1))) COLLATE ""C"" > $4
                            ELSE
                                key COLLATE ""C"" > $4
                            END
                    ELSE
                        true
                END AND
                CASE
                    WHEN $6 != '''' THEN
                        id COLLATE ""C"" > $6
                    ELSE
                        true
                    END
            ORDER BY
                key COLLATE ""C"" ASC, created_at ASC) as e order by key COLLATE ""C"" LIMIT $3'
        USING prefix_param, delimiter_param, max_keys, next_key_token, bucket_id, next_upload_token;
END;
$function$
",null,null,null
FUNCTIONS,storage,list_objects_with_delimiter,"_bucket_id text, prefix_param text, delimiter_param text, max_keys integer, start_after text, next_token text, sort_order text","CREATE OR REPLACE FUNCTION storage.list_objects_with_delimiter(_bucket_id text, prefix_param text, delimiter_param text, max_keys integer DEFAULT 100, start_after text DEFAULT ''::text, next_token text DEFAULT ''::text, sort_order text DEFAULT 'asc'::text)
 RETURNS TABLE(name text, id uuid, metadata jsonb, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone)
 LANGUAGE plpgsql
 STABLE
AS $function$
DECLARE
    v_peek_name TEXT;
    v_current RECORD;
    v_common_prefix TEXT;

    -- Configuration
    v_is_asc BOOLEAN;
    v_prefix TEXT;
    v_start TEXT;
    v_upper_bound TEXT;
    v_file_batch_size INT;

    -- Seek state
    v_next_seek TEXT;
    v_count INT := 0;

    -- Dynamic SQL for batch query only
    v_batch_query TEXT;

BEGIN
    -- ========================================================================
    -- INITIALIZATION
    -- ========================================================================
    v_is_asc := lower(coalesce(sort_order, 'asc')) = 'asc';
    v_prefix := coalesce(prefix_param, '');
    v_start := CASE WHEN coalesce(next_token, '') <> '' THEN next_token ELSE coalesce(start_after, '') END;
    v_file_batch_size := LEAST(GREATEST(max_keys * 2, 100), 1000);

    -- Calculate upper bound for prefix filtering (bytewise, using COLLATE ""C"")
    IF v_prefix = '' THEN
        v_upper_bound := NULL;
    ELSIF right(v_prefix, 1) = delimiter_param THEN
        v_upper_bound := left(v_prefix, -1) || chr(ascii(delimiter_param) + 1);
    ELSE
        v_upper_bound := left(v_prefix, -1) || chr(ascii(right(v_prefix, 1)) + 1);
    END IF;

    -- Build batch query (dynamic SQL - called infrequently, amortized over many rows)
    IF v_is_asc THEN
        IF v_upper_bound IS NOT NULL THEN
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND o.name COLLATE ""C"" >= $2 ' ||
                'AND o.name COLLATE ""C"" < $3 ORDER BY o.name COLLATE ""C"" ASC LIMIT $4';
        ELSE
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND o.name COLLATE ""C"" >= $2 ' ||
                'ORDER BY o.name COLLATE ""C"" ASC LIMIT $4';
        END IF;
    ELSE
        IF v_upper_bound IS NOT NULL THEN
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND o.name COLLATE ""C"" < $2 ' ||
                'AND o.name COLLATE ""C"" >= $3 ORDER BY o.name COLLATE ""C"" DESC LIMIT $4';
        ELSE
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND o.name COLLATE ""C"" < $2 ' ||
                'ORDER BY o.name COLLATE ""C"" DESC LIMIT $4';
        END IF;
    END IF;

    -- ========================================================================
    -- SEEK INITIALIZATION: Determine starting position
    -- ========================================================================
    IF v_start = '' THEN
        IF v_is_asc THEN
            v_next_seek := v_prefix;
        ELSE
            -- DESC without cursor: find the last item in range
            IF v_upper_bound IS NOT NULL THEN
                SELECT o.name INTO v_next_seek FROM storage.objects o
                WHERE o.bucket_id = _bucket_id AND o.name COLLATE ""C"" >= v_prefix AND o.name COLLATE ""C"" < v_upper_bound
                ORDER BY o.name COLLATE ""C"" DESC LIMIT 1;
            ELSIF v_prefix <> '' THEN
                SELECT o.name INTO v_next_seek FROM storage.objects o
                WHERE o.bucket_id = _bucket_id AND o.name COLLATE ""C"" >= v_prefix
                ORDER BY o.name COLLATE ""C"" DESC LIMIT 1;
            ELSE
                SELECT o.name INTO v_next_seek FROM storage.objects o
                WHERE o.bucket_id = _bucket_id
                ORDER BY o.name COLLATE ""C"" DESC LIMIT 1;
            END IF;

            IF v_next_seek IS NOT NULL THEN
                v_next_seek := v_next_seek || delimiter_param;
            ELSE
                RETURN;
            END IF;
        END IF;
    ELSE
        -- Cursor provided: determine if it refers to a folder or leaf
        IF EXISTS (
            SELECT 1 FROM storage.objects o
            WHERE o.bucket_id = _bucket_id
              AND o.name COLLATE ""C"" LIKE v_start || delimiter_param || '%'
            LIMIT 1
        ) THEN
            -- Cursor refers to a folder
            IF v_is_asc THEN
                v_next_seek := v_start || chr(ascii(delimiter_param) + 1);
            ELSE
                v_next_seek := v_start || delimiter_param;
            END IF;
        ELSE
            -- Cursor refers to a leaf object
            IF v_is_asc THEN
                v_next_seek := v_start || delimiter_param;
            ELSE
                v_next_seek := v_start;
            END IF;
        END IF;
    END IF;

    -- ========================================================================
    -- MAIN LOOP: Hybrid peek-then-batch algorithm
    -- Uses STATIC SQL for peek (hot path) and DYNAMIC SQL for batch
    -- ========================================================================
    LOOP
        EXIT WHEN v_count >= max_keys;

        -- STEP 1: PEEK using STATIC SQL (plan cached, very fast)
        IF v_is_asc THEN
            IF v_upper_bound IS NOT NULL THEN
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = _bucket_id AND o.name COLLATE ""C"" >= v_next_seek AND o.name COLLATE ""C"" < v_upper_bound
                ORDER BY o.name COLLATE ""C"" ASC LIMIT 1;
            ELSE
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = _bucket_id AND o.name COLLATE ""C"" >= v_next_seek
                ORDER BY o.name COLLATE ""C"" ASC LIMIT 1;
            END IF;
        ELSE
            IF v_upper_bound IS NOT NULL THEN
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = _bucket_id AND o.name COLLATE ""C"" < v_next_seek AND o.name COLLATE ""C"" >= v_prefix
                ORDER BY o.name COLLATE ""C"" DESC LIMIT 1;
            ELSIF v_prefix <> '' THEN
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = _bucket_id AND o.name COLLATE ""C"" < v_next_seek AND o.name COLLATE ""C"" >= v_prefix
                ORDER BY o.name COLLATE ""C"" DESC LIMIT 1;
            ELSE
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = _bucket_id AND o.name COLLATE ""C"" < v_next_seek
                ORDER BY o.name COLLATE ""C"" DESC LIMIT 1;
            END IF;
        END IF;

        EXIT WHEN v_peek_name IS NULL;

        -- STEP 2: Check if this is a FOLDER or FILE
        v_common_prefix := storage.get_common_prefix(v_peek_name, v_prefix, delimiter_param);

        IF v_common_prefix IS NOT NULL THEN
            -- FOLDER: Emit and skip to next folder (no heap access needed)
            name := rtrim(v_common_prefix, delimiter_param);
            id := NULL;
            updated_at := NULL;
            created_at := NULL;
            last_accessed_at := NULL;
            metadata := NULL;
            RETURN NEXT;
            v_count := v_count + 1;

            -- Advance seek past the folder range
            IF v_is_asc THEN
                v_next_seek := left(v_common_prefix, -1) || chr(ascii(delimiter_param) + 1);
            ELSE
                v_next_seek := v_common_prefix;
            END IF;
        ELSE
            -- FILE: Batch fetch using DYNAMIC SQL (overhead amortized over many rows)
            -- For ASC: upper_bound is the exclusive upper limit (< condition)
            -- For DESC: prefix is the inclusive lower limit (>= condition)
            FOR v_current IN EXECUTE v_batch_query USING _bucket_id, v_next_seek,
                CASE WHEN v_is_asc THEN COALESCE(v_upper_bound, v_prefix) ELSE v_prefix END, v_file_batch_size
            LOOP
                v_common_prefix := storage.get_common_prefix(v_current.name, v_prefix, delimiter_param);

                IF v_common_prefix IS NOT NULL THEN
                    -- Hit a folder: exit batch, let peek handle it
                    v_next_seek := v_current.name;
                    EXIT;
                END IF;

                -- Emit file
                name := v_current.name;
                id := v_current.id;
                updated_at := v_current.updated_at;
                created_at := v_current.created_at;
                last_accessed_at := v_current.last_accessed_at;
                metadata := v_current.metadata;
                RETURN NEXT;
                v_count := v_count + 1;

                -- Advance seek past this file
                IF v_is_asc THEN
                    v_next_seek := v_current.name || delimiter_param;
                ELSE
                    v_next_seek := v_current.name;
                END IF;

                EXIT WHEN v_count >= max_keys;
            END LOOP;
        END IF;
    END LOOP;
END;
$function$
",null,null,null
FUNCTIONS,storage,operation,,"CREATE OR REPLACE FUNCTION storage.operation()
 RETURNS text
 LANGUAGE plpgsql
 STABLE
AS $function$
BEGIN
    RETURN current_setting('storage.operation', true);
END;
$function$
",null,null,null
FUNCTIONS,storage,protect_delete,,"CREATE OR REPLACE FUNCTION storage.protect_delete()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    -- Check if storage.allow_delete_query is set to 'true'
    IF COALESCE(current_setting('storage.allow_delete_query', true), 'false') != 'true' THEN
        RAISE EXCEPTION 'Direct deletion from storage tables is not allowed. Use the Storage API instead.'
            USING HINT = 'This prevents accidental data loss from orphaned objects.',
                  ERRCODE = '42501';
    END IF;
    RETURN NULL;
END;
$function$
",null,null,null
FUNCTIONS,storage,search,"prefix text, bucketname text, limits integer, levels integer, offsets integer, search text, sortcolumn text, sortorder text","CREATE OR REPLACE FUNCTION storage.search(prefix text, bucketname text, limits integer DEFAULT 100, levels integer DEFAULT 1, offsets integer DEFAULT 0, search text DEFAULT ''::text, sortcolumn text DEFAULT 'name'::text, sortorder text DEFAULT 'asc'::text)
 RETURNS TABLE(name text, id uuid, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone, metadata jsonb)
 LANGUAGE plpgsql
 STABLE
AS $function$
DECLARE
    v_peek_name TEXT;
    v_current RECORD;
    v_common_prefix TEXT;
    v_delimiter CONSTANT TEXT := '/';

    -- Configuration
    v_limit INT;
    v_prefix TEXT;
    v_prefix_lower TEXT;
    v_is_asc BOOLEAN;
    v_order_by TEXT;
    v_sort_order TEXT;
    v_upper_bound TEXT;
    v_file_batch_size INT;

    -- Dynamic SQL for batch query only
    v_batch_query TEXT;

    -- Seek state
    v_next_seek TEXT;
    v_count INT := 0;
    v_skipped INT := 0;
BEGIN
    -- ========================================================================
    -- INITIALIZATION
    -- ========================================================================
    v_limit := LEAST(coalesce(limits, 100), 1500);
    v_prefix := coalesce(prefix, '') || coalesce(search, '');
    v_prefix_lower := lower(v_prefix);
    v_is_asc := lower(coalesce(sortorder, 'asc')) = 'asc';
    v_file_batch_size := LEAST(GREATEST(v_limit * 2, 100), 1000);

    -- Validate sort column
    CASE lower(coalesce(sortcolumn, 'name'))
        WHEN 'name' THEN v_order_by := 'name';
        WHEN 'updated_at' THEN v_order_by := 'updated_at';
        WHEN 'created_at' THEN v_order_by := 'created_at';
        WHEN 'last_accessed_at' THEN v_order_by := 'last_accessed_at';
        ELSE v_order_by := 'name';
    END CASE;

    v_sort_order := CASE WHEN v_is_asc THEN 'asc' ELSE 'desc' END;

    -- ========================================================================
    -- NON-NAME SORTING: Use path_tokens approach (unchanged)
    -- ========================================================================
    IF v_order_by != 'name' THEN
        RETURN QUERY EXECUTE format(
            $sql$
            WITH folders AS (
                SELECT path_tokens[$1] AS folder
                FROM storage.objects
                WHERE objects.name ILIKE $2 || '%%'
                  AND bucket_id = $3
                  AND array_length(objects.path_tokens, 1) <> $1
                GROUP BY folder
                ORDER BY folder %s
            )
            (SELECT folder AS ""name"",
                   NULL::uuid AS id,
                   NULL::timestamptz AS updated_at,
                   NULL::timestamptz AS created_at,
                   NULL::timestamptz AS last_accessed_at,
                   NULL::jsonb AS metadata FROM folders)
            UNION ALL
            (SELECT path_tokens[$1] AS ""name"",
                   id, updated_at, created_at, last_accessed_at, metadata
             FROM storage.objects
             WHERE objects.name ILIKE $2 || '%%'
               AND bucket_id = $3
               AND array_length(objects.path_tokens, 1) = $1
             ORDER BY %I %s)
            LIMIT $4 OFFSET $5
            $sql$, v_sort_order, v_order_by, v_sort_order
        ) USING levels, v_prefix, bucketname, v_limit, offsets;
        RETURN;
    END IF;

    -- ========================================================================
    -- NAME SORTING: Hybrid skip-scan with batch optimization
    -- ========================================================================

    -- Calculate upper bound for prefix filtering
    IF v_prefix_lower = '' THEN
        v_upper_bound := NULL;
    ELSIF right(v_prefix_lower, 1) = v_delimiter THEN
        v_upper_bound := left(v_prefix_lower, -1) || chr(ascii(v_delimiter) + 1);
    ELSE
        v_upper_bound := left(v_prefix_lower, -1) || chr(ascii(right(v_prefix_lower, 1)) + 1);
    END IF;

    -- Build batch query (dynamic SQL - called infrequently, amortized over many rows)
    IF v_is_asc THEN
        IF v_upper_bound IS NOT NULL THEN
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND lower(o.name) COLLATE ""C"" >= $2 ' ||
                'AND lower(o.name) COLLATE ""C"" < $3 ORDER BY lower(o.name) COLLATE ""C"" ASC LIMIT $4';
        ELSE
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND lower(o.name) COLLATE ""C"" >= $2 ' ||
                'ORDER BY lower(o.name) COLLATE ""C"" ASC LIMIT $4';
        END IF;
    ELSE
        IF v_upper_bound IS NOT NULL THEN
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND lower(o.name) COLLATE ""C"" < $2 ' ||
                'AND lower(o.name) COLLATE ""C"" >= $3 ORDER BY lower(o.name) COLLATE ""C"" DESC LIMIT $4';
        ELSE
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND lower(o.name) COLLATE ""C"" < $2 ' ||
                'ORDER BY lower(o.name) COLLATE ""C"" DESC LIMIT $4';
        END IF;
    END IF;

    -- Initialize seek position
    IF v_is_asc THEN
        v_next_seek := v_prefix_lower;
    ELSE
        -- DESC: find the last item in range first (static SQL)
        IF v_upper_bound IS NOT NULL THEN
            SELECT o.name INTO v_peek_name FROM storage.objects o
            WHERE o.bucket_id = bucketname AND lower(o.name) COLLATE ""C"" >= v_prefix_lower AND lower(o.name) COLLATE ""C"" < v_upper_bound
            ORDER BY lower(o.name) COLLATE ""C"" DESC LIMIT 1;
        ELSIF v_prefix_lower <> '' THEN
            SELECT o.name INTO v_peek_name FROM storage.objects o
            WHERE o.bucket_id = bucketname AND lower(o.name) COLLATE ""C"" >= v_prefix_lower
            ORDER BY lower(o.name) COLLATE ""C"" DESC LIMIT 1;
        ELSE
            SELECT o.name INTO v_peek_name FROM storage.objects o
            WHERE o.bucket_id = bucketname
            ORDER BY lower(o.name) COLLATE ""C"" DESC LIMIT 1;
        END IF;

        IF v_peek_name IS NOT NULL THEN
            v_next_seek := lower(v_peek_name) || v_delimiter;
        ELSE
            RETURN;
        END IF;
    END IF;

    -- ========================================================================
    -- MAIN LOOP: Hybrid peek-then-batch algorithm
    -- Uses STATIC SQL for peek (hot path) and DYNAMIC SQL for batch
    -- ========================================================================
    LOOP
        EXIT WHEN v_count >= v_limit;

        -- STEP 1: PEEK using STATIC SQL (plan cached, very fast)
        IF v_is_asc THEN
            IF v_upper_bound IS NOT NULL THEN
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = bucketname AND lower(o.name) COLLATE ""C"" >= v_next_seek AND lower(o.name) COLLATE ""C"" < v_upper_bound
                ORDER BY lower(o.name) COLLATE ""C"" ASC LIMIT 1;
            ELSE
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = bucketname AND lower(o.name) COLLATE ""C"" >= v_next_seek
                ORDER BY lower(o.name) COLLATE ""C"" ASC LIMIT 1;
            END IF;
        ELSE
            IF v_upper_bound IS NOT NULL THEN
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = bucketname AND lower(o.name) COLLATE ""C"" < v_next_seek AND lower(o.name) COLLATE ""C"" >= v_prefix_lower
                ORDER BY lower(o.name) COLLATE ""C"" DESC LIMIT 1;
            ELSIF v_prefix_lower <> '' THEN
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = bucketname AND lower(o.name) COLLATE ""C"" < v_next_seek AND lower(o.name) COLLATE ""C"" >= v_prefix_lower
                ORDER BY lower(o.name) COLLATE ""C"" DESC LIMIT 1;
            ELSE
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = bucketname AND lower(o.name) COLLATE ""C"" < v_next_seek
                ORDER BY lower(o.name) COLLATE ""C"" DESC LIMIT 1;
            END IF;
        END IF;

        EXIT WHEN v_peek_name IS NULL;

        -- STEP 2: Check if this is a FOLDER or FILE
        v_common_prefix := storage.get_common_prefix(lower(v_peek_name), v_prefix_lower, v_delimiter);

        IF v_common_prefix IS NOT NULL THEN
            -- FOLDER: Handle offset, emit if needed, skip to next folder
            IF v_skipped < offsets THEN
                v_skipped := v_skipped + 1;
            ELSE
                name := split_part(rtrim(storage.get_common_prefix(v_peek_name, v_prefix, v_delimiter), v_delimiter), v_delimiter, levels);
                id := NULL;
                updated_at := NULL;
                created_at := NULL;
                last_accessed_at := NULL;
                metadata := NULL;
                RETURN NEXT;
                v_count := v_count + 1;
            END IF;

            -- Advance seek past the folder range
            IF v_is_asc THEN
                v_next_seek := lower(left(v_common_prefix, -1)) || chr(ascii(v_delimiter) + 1);
            ELSE
                v_next_seek := lower(v_common_prefix);
            END IF;
        ELSE
            -- FILE: Batch fetch using DYNAMIC SQL (overhead amortized over many rows)
            -- For ASC: upper_bound is the exclusive upper limit (< condition)
            -- For DESC: prefix_lower is the inclusive lower limit (>= condition)
            FOR v_current IN EXECUTE v_batch_query
                USING bucketname, v_next_seek,
                    CASE WHEN v_is_asc THEN COALESCE(v_upper_bound, v_prefix_lower) ELSE v_prefix_lower END, v_file_batch_size
            LOOP
                v_common_prefix := storage.get_common_prefix(lower(v_current.name), v_prefix_lower, v_delimiter);

                IF v_common_prefix IS NOT NULL THEN
                    -- Hit a folder: exit batch, let peek handle it
                    v_next_seek := lower(v_current.name);
                    EXIT;
                END IF;

                -- Handle offset skipping
                IF v_skipped < offsets THEN
                    v_skipped := v_skipped + 1;
                ELSE
                    -- Emit file
                    name := split_part(v_current.name, v_delimiter, levels);
                    id := v_current.id;
                    updated_at := v_current.updated_at;
                    created_at := v_current.created_at;
                    last_accessed_at := v_current.last_accessed_at;
                    metadata := v_current.metadata;
                    RETURN NEXT;
                    v_count := v_count + 1;
                END IF;

                -- Advance seek past this file
                IF v_is_asc THEN
                    v_next_seek := lower(v_current.name) || v_delimiter;
                ELSE
                    v_next_seek := lower(v_current.name);
                END IF;

                EXIT WHEN v_count >= v_limit;
            END LOOP;
        END IF;
    END LOOP;
END;
$function$
",null,null,null
FUNCTIONS,storage,search_by_timestamp,"p_prefix text, p_bucket_id text, p_limit integer, p_level integer, p_start_after text, p_sort_order text, p_sort_column text, p_sort_column_after text","CREATE OR REPLACE FUNCTION storage.search_by_timestamp(p_prefix text, p_bucket_id text, p_limit integer, p_level integer, p_start_after text, p_sort_order text, p_sort_column text, p_sort_column_after text)
 RETURNS TABLE(key text, name text, id uuid, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone, metadata jsonb)
 LANGUAGE plpgsql
 STABLE
AS $function$
DECLARE
    v_cursor_op text;
    v_query text;
    v_prefix text;
BEGIN
    v_prefix := coalesce(p_prefix, '');

    IF p_sort_order = 'asc' THEN
        v_cursor_op := '>';
    ELSE
        v_cursor_op := '<';
    END IF;

    v_query := format($sql$
        WITH raw_objects AS (
            SELECT
                o.name AS obj_name,
                o.id AS obj_id,
                o.updated_at AS obj_updated_at,
                o.created_at AS obj_created_at,
                o.last_accessed_at AS obj_last_accessed_at,
                o.metadata AS obj_metadata,
                storage.get_common_prefix(o.name, $1, '/') AS common_prefix
            FROM storage.objects o
            WHERE o.bucket_id = $2
              AND o.name COLLATE ""C"" LIKE $1 || '%%'
        ),
        -- Aggregate common prefixes (folders)
        -- Both created_at and updated_at use MIN(obj_created_at) to match the old prefixes table behavior
        aggregated_prefixes AS (
            SELECT
                rtrim(common_prefix, '/') AS name,
                NULL::uuid AS id,
                MIN(obj_created_at) AS updated_at,
                MIN(obj_created_at) AS created_at,
                NULL::timestamptz AS last_accessed_at,
                NULL::jsonb AS metadata,
                TRUE AS is_prefix
            FROM raw_objects
            WHERE common_prefix IS NOT NULL
            GROUP BY common_prefix
        ),
        leaf_objects AS (
            SELECT
                obj_name AS name,
                obj_id AS id,
                obj_updated_at AS updated_at,
                obj_created_at AS created_at,
                obj_last_accessed_at AS last_accessed_at,
                obj_metadata AS metadata,
                FALSE AS is_prefix
            FROM raw_objects
            WHERE common_prefix IS NULL
        ),
        combined AS (
            SELECT * FROM aggregated_prefixes
            UNION ALL
            SELECT * FROM leaf_objects
        ),
        filtered AS (
            SELECT *
            FROM combined
            WHERE (
                $5 = ''
                OR ROW(
                    date_trunc('milliseconds', %I),
                    name COLLATE ""C""
                ) %s ROW(
                    COALESCE(NULLIF($6, '')::timestamptz, 'epoch'::timestamptz),
                    $5
                )
            )
        )
        SELECT
            split_part(name, '/', $3) AS key,
            name,
            id,
            updated_at,
            created_at,
            last_accessed_at,
            metadata
        FROM filtered
        ORDER BY
            COALESCE(date_trunc('milliseconds', %I), 'epoch'::timestamptz) %s,
            name COLLATE ""C"" %s
        LIMIT $4
    $sql$,
        p_sort_column,
        v_cursor_op,
        p_sort_column,
        p_sort_order,
        p_sort_order
    );

    RETURN QUERY EXECUTE v_query
    USING v_prefix, p_bucket_id, p_level, p_limit, p_start_after, p_sort_column_after;
END;
$function$
",null,null,null
FUNCTIONS,storage,search_v2,"prefix text, bucket_name text, limits integer, levels integer, start_after text, sort_order text, sort_column text, sort_column_after text","CREATE OR REPLACE FUNCTION storage.search_v2(prefix text, bucket_name text, limits integer DEFAULT 100, levels integer DEFAULT 1, start_after text DEFAULT ''::text, sort_order text DEFAULT 'asc'::text, sort_column text DEFAULT 'name'::text, sort_column_after text DEFAULT ''::text)
 RETURNS TABLE(key text, name text, id uuid, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone, metadata jsonb)
 LANGUAGE plpgsql
 STABLE
AS $function$
DECLARE
    v_sort_col text;
    v_sort_ord text;
    v_limit int;
BEGIN
    -- Cap limit to maximum of 1500 records
    v_limit := LEAST(coalesce(limits, 100), 1500);

    -- Validate and normalize sort_order
    v_sort_ord := lower(coalesce(sort_order, 'asc'));
    IF v_sort_ord NOT IN ('asc', 'desc') THEN
        v_sort_ord := 'asc';
    END IF;

    -- Validate and normalize sort_column
    v_sort_col := lower(coalesce(sort_column, 'name'));
    IF v_sort_col NOT IN ('name', 'updated_at', 'created_at') THEN
        v_sort_col := 'name';
    END IF;

    -- Route to appropriate implementation
    IF v_sort_col = 'name' THEN
        -- Use list_objects_with_delimiter for name sorting (most efficient: O(k * log n))
        RETURN QUERY
        SELECT
            split_part(l.name, '/', levels) AS key,
            l.name AS name,
            l.id,
            l.updated_at,
            l.created_at,
            l.last_accessed_at,
            l.metadata
        FROM storage.list_objects_with_delimiter(
            bucket_name,
            coalesce(prefix, ''),
            '/',
            v_limit,
            start_after,
            '',
            v_sort_ord
        ) l;
    ELSE
        -- Use aggregation approach for timestamp sorting
        -- Not efficient for large datasets but supports correct pagination
        RETURN QUERY SELECT * FROM storage.search_by_timestamp(
            prefix, bucket_name, v_limit, levels, start_after,
            v_sort_ord, v_sort_col, sort_column_after
        );
    END IF;
END;
$function$
",null,null,null
FUNCTIONS,storage,update_updated_at_column,,"CREATE OR REPLACE FUNCTION storage.update_updated_at_column()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = now();
    RETURN NEW; 
END;
$function$
",null,null,null
FUNCTIONS,vault,_crypto_aead_det_decrypt,"message bytea, additional bytea, key_id bigint, context bytea, nonce bytea","CREATE OR REPLACE FUNCTION vault._crypto_aead_det_decrypt(message bytea, additional bytea, key_id bigint, context bytea DEFAULT '\x7067736f6469756d'::bytea, nonce bytea DEFAULT NULL::bytea)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE
AS '$libdir/supabase_vault', $function$pgsodium_crypto_aead_det_decrypt_by_id$function$
",null,null,null
FUNCTIONS,vault,_crypto_aead_det_encrypt,"message bytea, additional bytea, key_id bigint, context bytea, nonce bytea","CREATE OR REPLACE FUNCTION vault._crypto_aead_det_encrypt(message bytea, additional bytea, key_id bigint, context bytea DEFAULT '\x7067736f6469756d'::bytea, nonce bytea DEFAULT NULL::bytea)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE
AS '$libdir/supabase_vault', $function$pgsodium_crypto_aead_det_encrypt_by_id$function$
",null,null,null
FUNCTIONS,vault,_crypto_aead_det_noncegen,,"CREATE OR REPLACE FUNCTION vault._crypto_aead_det_noncegen()
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE
AS '$libdir/supabase_vault', $function$pgsodium_crypto_aead_det_noncegen$function$
",null,null,null
FUNCTIONS,vault,create_secret,"new_secret text, new_name text, new_description text, new_key_id uuid","CREATE OR REPLACE FUNCTION vault.create_secret(new_secret text, new_name text DEFAULT NULL::text, new_description text DEFAULT ''::text, new_key_id uuid DEFAULT NULL::uuid)
 RETURNS uuid
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO ''
AS $function$
DECLARE
  rec record;
BEGIN
  INSERT INTO vault.secrets (secret, name, description)
  VALUES (
    new_secret,
    new_name,
    new_description
  )
  RETURNING * INTO rec;
  UPDATE vault.secrets s
  SET secret = encode(vault._crypto_aead_det_encrypt(
    message := convert_to(rec.secret, 'utf8'),
    additional := convert_to(s.id::text, 'utf8'),
    key_id := 0,
    context := 'pgsodium'::bytea,
    nonce := rec.nonce
  ), 'base64')
  WHERE id = rec.id;
  RETURN rec.id;
END
$function$
",null,null,null
FUNCTIONS,vault,update_secret,"secret_id uuid, new_secret text, new_name text, new_description text, new_key_id uuid","CREATE OR REPLACE FUNCTION vault.update_secret(secret_id uuid, new_secret text DEFAULT NULL::text, new_name text DEFAULT NULL::text, new_description text DEFAULT NULL::text, new_key_id uuid DEFAULT NULL::uuid)
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO ''
AS $function$
DECLARE
  decrypted_secret text := (SELECT decrypted_secret FROM vault.decrypted_secrets WHERE id = secret_id);
BEGIN
  UPDATE vault.secrets s
  SET
    secret = CASE WHEN new_secret IS NULL THEN s.secret
                  ELSE encode(vault._crypto_aead_det_encrypt(
                    message := convert_to(new_secret, 'utf8'),
                    additional := convert_to(s.id::text, 'utf8'),
                    key_id := 0,
                    context := 'pgsodium'::bytea,
                    nonce := s.nonce
                  ), 'base64') END,
    name = coalesce(new_name, s.name),
    description = coalesce(new_description, s.description),
    updated_at = now()
  WHERE s.id = secret_id;
END
$function$
",null,null,null
INDEXES,auth,audit_log_entries,audit_log_entries_pkey,CREATE UNIQUE INDEX audit_log_entries_pkey ON auth.audit_log_entries USING btree (id),null,null,null
INDEXES,auth,audit_log_entries,audit_logs_instance_id_idx,CREATE INDEX audit_logs_instance_id_idx ON auth.audit_log_entries USING btree (instance_id),null,null,null
INDEXES,auth,flow_state,flow_state_created_at_idx,CREATE INDEX flow_state_created_at_idx ON auth.flow_state USING btree (created_at DESC),null,null,null
INDEXES,auth,flow_state,flow_state_pkey,CREATE UNIQUE INDEX flow_state_pkey ON auth.flow_state USING btree (id),null,null,null
INDEXES,auth,flow_state,idx_auth_code,CREATE INDEX idx_auth_code ON auth.flow_state USING btree (auth_code),null,null,null
INDEXES,auth,flow_state,idx_user_id_auth_method,"CREATE INDEX idx_user_id_auth_method ON auth.flow_state USING btree (user_id, authentication_method)",null,null,null
INDEXES,auth,identities,identities_email_idx,CREATE INDEX identities_email_idx ON auth.identities USING btree (email text_pattern_ops),null,null,null
INDEXES,auth,identities,identities_pkey,CREATE UNIQUE INDEX identities_pkey ON auth.identities USING btree (id),null,null,null
INDEXES,auth,identities,identities_provider_id_provider_unique,"CREATE UNIQUE INDEX identities_provider_id_provider_unique ON auth.identities USING btree (provider_id, provider)",null,null,null
INDEXES,auth,identities,identities_user_id_idx,CREATE INDEX identities_user_id_idx ON auth.identities USING btree (user_id),null,null,null
INDEXES,auth,instances,instances_pkey,CREATE UNIQUE INDEX instances_pkey ON auth.instances USING btree (id),null,null,null
INDEXES,auth,mfa_amr_claims,amr_id_pk,CREATE UNIQUE INDEX amr_id_pk ON auth.mfa_amr_claims USING btree (id),null,null,null
INDEXES,auth,mfa_amr_claims,mfa_amr_claims_session_id_authentication_method_pkey,"CREATE UNIQUE INDEX mfa_amr_claims_session_id_authentication_method_pkey ON auth.mfa_amr_claims USING btree (session_id, authentication_method)",null,null,null
INDEXES,auth,mfa_challenges,mfa_challenge_created_at_idx,CREATE INDEX mfa_challenge_created_at_idx ON auth.mfa_challenges USING btree (created_at DESC),null,null,null
INDEXES,auth,mfa_challenges,mfa_challenges_pkey,CREATE UNIQUE INDEX mfa_challenges_pkey ON auth.mfa_challenges USING btree (id),null,null,null
INDEXES,auth,mfa_factors,factor_id_created_at_idx,"CREATE INDEX factor_id_created_at_idx ON auth.mfa_factors USING btree (user_id, created_at)",null,null,null
INDEXES,auth,mfa_factors,mfa_factors_last_challenged_at_key,CREATE UNIQUE INDEX mfa_factors_last_challenged_at_key ON auth.mfa_factors USING btree (last_challenged_at),null,null,null
INDEXES,auth,mfa_factors,mfa_factors_pkey,CREATE UNIQUE INDEX mfa_factors_pkey ON auth.mfa_factors USING btree (id),null,null,null
INDEXES,auth,mfa_factors,mfa_factors_user_friendly_name_unique,"CREATE UNIQUE INDEX mfa_factors_user_friendly_name_unique ON auth.mfa_factors USING btree (friendly_name, user_id) WHERE (TRIM(BOTH FROM friendly_name) <> ''::text)",null,null,null
INDEXES,auth,mfa_factors,mfa_factors_user_id_idx,CREATE INDEX mfa_factors_user_id_idx ON auth.mfa_factors USING btree (user_id),null,null,null
INDEXES,auth,mfa_factors,unique_phone_factor_per_user,"CREATE UNIQUE INDEX unique_phone_factor_per_user ON auth.mfa_factors USING btree (user_id, phone)",null,null,null
INDEXES,auth,oauth_authorizations,oauth_auth_pending_exp_idx,CREATE INDEX oauth_auth_pending_exp_idx ON auth.oauth_authorizations USING btree (expires_at) WHERE (status = 'pending'::auth.oauth_authorization_status),null,null,null
INDEXES,auth,oauth_authorizations,oauth_authorizations_authorization_code_key,CREATE UNIQUE INDEX oauth_authorizations_authorization_code_key ON auth.oauth_authorizations USING btree (authorization_code),null,null,null
INDEXES,auth,oauth_authorizations,oauth_authorizations_authorization_id_key,CREATE UNIQUE INDEX oauth_authorizations_authorization_id_key ON auth.oauth_authorizations USING btree (authorization_id),null,null,null
INDEXES,auth,oauth_authorizations,oauth_authorizations_pkey,CREATE UNIQUE INDEX oauth_authorizations_pkey ON auth.oauth_authorizations USING btree (id),null,null,null
INDEXES,auth,oauth_client_states,idx_oauth_client_states_created_at,CREATE INDEX idx_oauth_client_states_created_at ON auth.oauth_client_states USING btree (created_at),null,null,null
INDEXES,auth,oauth_client_states,oauth_client_states_pkey,CREATE UNIQUE INDEX oauth_client_states_pkey ON auth.oauth_client_states USING btree (id),null,null,null
INDEXES,auth,oauth_clients,oauth_clients_deleted_at_idx,CREATE INDEX oauth_clients_deleted_at_idx ON auth.oauth_clients USING btree (deleted_at),null,null,null
INDEXES,auth,oauth_clients,oauth_clients_pkey,CREATE UNIQUE INDEX oauth_clients_pkey ON auth.oauth_clients USING btree (id),null,null,null
INDEXES,auth,oauth_consents,oauth_consents_active_client_idx,CREATE INDEX oauth_consents_active_client_idx ON auth.oauth_consents USING btree (client_id) WHERE (revoked_at IS NULL),null,null,null
INDEXES,auth,oauth_consents,oauth_consents_active_user_client_idx,"CREATE INDEX oauth_consents_active_user_client_idx ON auth.oauth_consents USING btree (user_id, client_id) WHERE (revoked_at IS NULL)",null,null,null
INDEXES,auth,oauth_consents,oauth_consents_pkey,CREATE UNIQUE INDEX oauth_consents_pkey ON auth.oauth_consents USING btree (id),null,null,null
INDEXES,auth,oauth_consents,oauth_consents_user_client_unique,"CREATE UNIQUE INDEX oauth_consents_user_client_unique ON auth.oauth_consents USING btree (user_id, client_id)",null,null,null
INDEXES,auth,oauth_consents,oauth_consents_user_order_idx,"CREATE INDEX oauth_consents_user_order_idx ON auth.oauth_consents USING btree (user_id, granted_at DESC)",null,null,null
INDEXES,auth,one_time_tokens,one_time_tokens_pkey,CREATE UNIQUE INDEX one_time_tokens_pkey ON auth.one_time_tokens USING btree (id),null,null,null
INDEXES,auth,one_time_tokens,one_time_tokens_relates_to_hash_idx,CREATE INDEX one_time_tokens_relates_to_hash_idx ON auth.one_time_tokens USING hash (relates_to),null,null,null
INDEXES,auth,one_time_tokens,one_time_tokens_token_hash_hash_idx,CREATE INDEX one_time_tokens_token_hash_hash_idx ON auth.one_time_tokens USING hash (token_hash),null,null,null
INDEXES,auth,one_time_tokens,one_time_tokens_user_id_token_type_key,"CREATE UNIQUE INDEX one_time_tokens_user_id_token_type_key ON auth.one_time_tokens USING btree (user_id, token_type)",null,null,null
INDEXES,auth,refresh_tokens,refresh_tokens_instance_id_idx,CREATE INDEX refresh_tokens_instance_id_idx ON auth.refresh_tokens USING btree (instance_id),null,null,null
INDEXES,auth,refresh_tokens,refresh_tokens_instance_id_user_id_idx,"CREATE INDEX refresh_tokens_instance_id_user_id_idx ON auth.refresh_tokens USING btree (instance_id, user_id)",null,null,null
INDEXES,auth,refresh_tokens,refresh_tokens_parent_idx,CREATE INDEX refresh_tokens_parent_idx ON auth.refresh_tokens USING btree (parent),null,null,null
INDEXES,auth,refresh_tokens,refresh_tokens_pkey,CREATE UNIQUE INDEX refresh_tokens_pkey ON auth.refresh_tokens USING btree (id),null,null,null
INDEXES,auth,refresh_tokens,refresh_tokens_session_id_revoked_idx,"CREATE INDEX refresh_tokens_session_id_revoked_idx ON auth.refresh_tokens USING btree (session_id, revoked)",null,null,null
INDEXES,auth,refresh_tokens,refresh_tokens_token_unique,CREATE UNIQUE INDEX refresh_tokens_token_unique ON auth.refresh_tokens USING btree (token),null,null,null
INDEXES,auth,refresh_tokens,refresh_tokens_updated_at_idx,CREATE INDEX refresh_tokens_updated_at_idx ON auth.refresh_tokens USING btree (updated_at DESC),null,null,null
INDEXES,auth,saml_providers,saml_providers_entity_id_key,CREATE UNIQUE INDEX saml_providers_entity_id_key ON auth.saml_providers USING btree (entity_id),null,null,null
INDEXES,auth,saml_providers,saml_providers_pkey,CREATE UNIQUE INDEX saml_providers_pkey ON auth.saml_providers USING btree (id),null,null,null
INDEXES,auth,saml_providers,saml_providers_sso_provider_id_idx,CREATE INDEX saml_providers_sso_provider_id_idx ON auth.saml_providers USING btree (sso_provider_id),null,null,null
INDEXES,auth,saml_relay_states,saml_relay_states_created_at_idx,CREATE INDEX saml_relay_states_created_at_idx ON auth.saml_relay_states USING btree (created_at DESC),null,null,null
INDEXES,auth,saml_relay_states,saml_relay_states_for_email_idx,CREATE INDEX saml_relay_states_for_email_idx ON auth.saml_relay_states USING btree (for_email),null,null,null
INDEXES,auth,saml_relay_states,saml_relay_states_pkey,CREATE UNIQUE INDEX saml_relay_states_pkey ON auth.saml_relay_states USING btree (id),null,null,null
INDEXES,auth,saml_relay_states,saml_relay_states_sso_provider_id_idx,CREATE INDEX saml_relay_states_sso_provider_id_idx ON auth.saml_relay_states USING btree (sso_provider_id),null,null,null
INDEXES,auth,schema_migrations,schema_migrations_pkey,CREATE UNIQUE INDEX schema_migrations_pkey ON auth.schema_migrations USING btree (version),null,null,null
INDEXES,auth,sessions,sessions_not_after_idx,CREATE INDEX sessions_not_after_idx ON auth.sessions USING btree (not_after DESC),null,null,null
INDEXES,auth,sessions,sessions_oauth_client_id_idx,CREATE INDEX sessions_oauth_client_id_idx ON auth.sessions USING btree (oauth_client_id),null,null,null
INDEXES,auth,sessions,sessions_pkey,CREATE UNIQUE INDEX sessions_pkey ON auth.sessions USING btree (id),null,null,null
INDEXES,auth,sessions,sessions_user_id_idx,CREATE INDEX sessions_user_id_idx ON auth.sessions USING btree (user_id),null,null,null
INDEXES,auth,sessions,user_id_created_at_idx,"CREATE INDEX user_id_created_at_idx ON auth.sessions USING btree (user_id, created_at)",null,null,null
INDEXES,auth,sso_domains,sso_domains_domain_idx,CREATE UNIQUE INDEX sso_domains_domain_idx ON auth.sso_domains USING btree (lower(domain)),null,null,null
INDEXES,auth,sso_domains,sso_domains_pkey,CREATE UNIQUE INDEX sso_domains_pkey ON auth.sso_domains USING btree (id),null,null,null
INDEXES,auth,sso_domains,sso_domains_sso_provider_id_idx,CREATE INDEX sso_domains_sso_provider_id_idx ON auth.sso_domains USING btree (sso_provider_id),null,null,null
INDEXES,auth,sso_providers,sso_providers_pkey,CREATE UNIQUE INDEX sso_providers_pkey ON auth.sso_providers USING btree (id),null,null,null
INDEXES,auth,sso_providers,sso_providers_resource_id_idx,CREATE UNIQUE INDEX sso_providers_resource_id_idx ON auth.sso_providers USING btree (lower(resource_id)),null,null,null
INDEXES,auth,sso_providers,sso_providers_resource_id_pattern_idx,CREATE INDEX sso_providers_resource_id_pattern_idx ON auth.sso_providers USING btree (resource_id text_pattern_ops),null,null,null
INDEXES,auth,users,confirmation_token_idx,CREATE UNIQUE INDEX confirmation_token_idx ON auth.users USING btree (confirmation_token) WHERE ((confirmation_token)::text !~ '^[0-9 ]*$'::text),null,null,null
INDEXES,auth,users,email_change_token_current_idx,CREATE UNIQUE INDEX email_change_token_current_idx ON auth.users USING btree (email_change_token_current) WHERE ((email_change_token_current)::text !~ '^[0-9 ]*$'::text),null,null,null
INDEXES,auth,users,email_change_token_new_idx,CREATE UNIQUE INDEX email_change_token_new_idx ON auth.users USING btree (email_change_token_new) WHERE ((email_change_token_new)::text !~ '^[0-9 ]*$'::text),null,null,null
INDEXES,auth,users,reauthentication_token_idx,CREATE UNIQUE INDEX reauthentication_token_idx ON auth.users USING btree (reauthentication_token) WHERE ((reauthentication_token)::text !~ '^[0-9 ]*$'::text),null,null,null
INDEXES,auth,users,recovery_token_idx,CREATE UNIQUE INDEX recovery_token_idx ON auth.users USING btree (recovery_token) WHERE ((recovery_token)::text !~ '^[0-9 ]*$'::text),null,null,null
INDEXES,auth,users,users_email_partial_key,CREATE UNIQUE INDEX users_email_partial_key ON auth.users USING btree (email) WHERE (is_sso_user = false),null,null,null
INDEXES,auth,users,users_instance_id_email_idx,"CREATE INDEX users_instance_id_email_idx ON auth.users USING btree (instance_id, lower((email)::text))",null,null,null
INDEXES,auth,users,users_instance_id_idx,CREATE INDEX users_instance_id_idx ON auth.users USING btree (instance_id),null,null,null
INDEXES,auth,users,users_is_anonymous_idx,CREATE INDEX users_is_anonymous_idx ON auth.users USING btree (is_anonymous),null,null,null
INDEXES,auth,users,users_phone_key,CREATE UNIQUE INDEX users_phone_key ON auth.users USING btree (phone),null,null,null
INDEXES,auth,users,users_pkey,CREATE UNIQUE INDEX users_pkey ON auth.users USING btree (id),null,null,null
INDEXES,public,category_templates,category_templates_pkey,"CREATE UNIQUE INDEX category_templates_pkey ON public.category_templates USING btree (category_id, global_template_id)",null,null,null
INDEXES,public,global_templates,global_templates_pkey,CREATE UNIQUE INDEX global_templates_pkey ON public.global_templates USING btree (id),null,null,null
INDEXES,public,group_memberships,group_memberships_pkey,"CREATE UNIQUE INDEX group_memberships_pkey ON public.group_memberships USING btree (user_id, group_id)",null,null,null
INDEXES,public,group_templates,group_templates_pkey,CREATE UNIQUE INDEX group_templates_pkey ON public.group_templates USING btree (id),null,null,null
INDEXES,public,groups,groups_pkey,CREATE UNIQUE INDEX groups_pkey ON public.groups USING btree (id),null,null,null
INDEXES,public,groups,idx_groups_parent_group_id,CREATE INDEX idx_groups_parent_group_id ON public.groups USING btree (parent_group_id),null,null,null
INDEXES,public,roles,roles_name_key,CREATE UNIQUE INDEX roles_name_key ON public.roles USING btree (name),null,null,null
INDEXES,public,roles,roles_pkey,CREATE UNIQUE INDEX roles_pkey ON public.roles USING btree (id),null,null,null
INDEXES,public,template_categories,template_categories_pkey,CREATE UNIQUE INDEX template_categories_pkey ON public.template_categories USING btree (id),null,null,null
INDEXES,public,user_roles,user_roles_pkey,CREATE UNIQUE INDEX user_roles_pkey ON public.user_roles USING btree (user_id),null,null,null
INDEXES,public,yacht_owners,yacht_owners_pkey,"CREATE UNIQUE INDEX yacht_owners_pkey ON public.yacht_owners USING btree (yacht_id, user_id)",null,null,null
INDEXES,public,yacht_tasks,yacht_tasks_pkey,CREATE UNIQUE INDEX yacht_tasks_pkey ON public.yacht_tasks USING btree (id),null,null,null
INDEXES,public,yacht_tasks,yacht_tasks_unique_open_per_yacht_global_template,"CREATE UNIQUE INDEX yacht_tasks_unique_open_per_yacht_global_template ON public.yacht_tasks USING btree (yacht_id, origin_global_template_id) WHERE ((origin_global_template_id IS NOT NULL) AND (deleted_at IS NULL) AND (status <> 'approved'::text))",null,null,null
INDEXES,public,yacht_tasks,yacht_tasks_unique_open_per_yacht_group_template,"CREATE UNIQUE INDEX yacht_tasks_unique_open_per_yacht_group_template ON public.yacht_tasks USING btree (yacht_id, group_template_id) WHERE ((group_template_id IS NOT NULL) AND (deleted_at IS NULL) AND (status <> 'approved'::text))",null,null,null
INDEXES,public,yachts,yachts_pkey,CREATE UNIQUE INDEX yachts_pkey ON public.yachts USING btree (id),null,null,null
INDEXES,realtime,messages,messages_inserted_at_topic_index,"CREATE INDEX messages_inserted_at_topic_index ON ONLY realtime.messages USING btree (inserted_at DESC, topic) WHERE ((extension = 'broadcast'::text) AND (private IS TRUE))",null,null,null
INDEXES,realtime,messages,messages_pkey,"CREATE UNIQUE INDEX messages_pkey ON ONLY realtime.messages USING btree (id, inserted_at)",null,null,null
INDEXES,realtime,schema_migrations,schema_migrations_pkey,CREATE UNIQUE INDEX schema_migrations_pkey ON realtime.schema_migrations USING btree (version),null,null,null
INDEXES,realtime,subscription,ix_realtime_subscription_entity,CREATE INDEX ix_realtime_subscription_entity ON realtime.subscription USING btree (entity),null,null,null
INDEXES,realtime,subscription,pk_subscription,CREATE UNIQUE INDEX pk_subscription ON realtime.subscription USING btree (id),null,null,null
INDEXES,realtime,subscription,subscription_subscription_id_entity_filters_action_filter_key,"CREATE UNIQUE INDEX subscription_subscription_id_entity_filters_action_filter_key ON realtime.subscription USING btree (subscription_id, entity, filters, action_filter)",null,null,null
INDEXES,storage,buckets,bname,CREATE UNIQUE INDEX bname ON storage.buckets USING btree (name),null,null,null
INDEXES,storage,buckets,buckets_pkey,CREATE UNIQUE INDEX buckets_pkey ON storage.buckets USING btree (id),null,null,null
INDEXES,storage,buckets_analytics,buckets_analytics_pkey,CREATE UNIQUE INDEX buckets_analytics_pkey ON storage.buckets_analytics USING btree (id),null,null,null
INDEXES,storage,buckets_analytics,buckets_analytics_unique_name_idx,CREATE UNIQUE INDEX buckets_analytics_unique_name_idx ON storage.buckets_analytics USING btree (name) WHERE (deleted_at IS NULL),null,null,null
INDEXES,storage,buckets_vectors,buckets_vectors_pkey,CREATE UNIQUE INDEX buckets_vectors_pkey ON storage.buckets_vectors USING btree (id),null,null,null
INDEXES,storage,migrations,migrations_name_key,CREATE UNIQUE INDEX migrations_name_key ON storage.migrations USING btree (name),null,null,null
INDEXES,storage,migrations,migrations_pkey,CREATE UNIQUE INDEX migrations_pkey ON storage.migrations USING btree (id),null,null,null
INDEXES,storage,objects,bucketid_objname,"CREATE UNIQUE INDEX bucketid_objname ON storage.objects USING btree (bucket_id, name)",null,null,null
INDEXES,storage,objects,idx_objects_bucket_id_name,"CREATE INDEX idx_objects_bucket_id_name ON storage.objects USING btree (bucket_id, name COLLATE ""C"")",null,null,null
INDEXES,storage,objects,idx_objects_bucket_id_name_lower,"CREATE INDEX idx_objects_bucket_id_name_lower ON storage.objects USING btree (bucket_id, lower(name) COLLATE ""C"")",null,null,null
INDEXES,storage,objects,name_prefix_search,CREATE INDEX name_prefix_search ON storage.objects USING btree (name text_pattern_ops),null,null,null
INDEXES,storage,objects,objects_pkey,CREATE UNIQUE INDEX objects_pkey ON storage.objects USING btree (id),null,null,null
INDEXES,storage,s3_multipart_uploads,idx_multipart_uploads_list,"CREATE INDEX idx_multipart_uploads_list ON storage.s3_multipart_uploads USING btree (bucket_id, key, created_at)",null,null,null
INDEXES,storage,s3_multipart_uploads,s3_multipart_uploads_pkey,CREATE UNIQUE INDEX s3_multipart_uploads_pkey ON storage.s3_multipart_uploads USING btree (id),null,null,null
INDEXES,storage,s3_multipart_uploads_parts,s3_multipart_uploads_parts_pkey,CREATE UNIQUE INDEX s3_multipart_uploads_parts_pkey ON storage.s3_multipart_uploads_parts USING btree (id),null,null,null
INDEXES,storage,vector_indexes,vector_indexes_name_bucket_id_idx,"CREATE UNIQUE INDEX vector_indexes_name_bucket_id_idx ON storage.vector_indexes USING btree (name, bucket_id)",null,null,null
INDEXES,storage,vector_indexes,vector_indexes_pkey,CREATE UNIQUE INDEX vector_indexes_pkey ON storage.vector_indexes USING btree (id),null,null,null
INDEXES,vault,secrets,secrets_name_idx,CREATE UNIQUE INDEX secrets_name_idx ON vault.secrets USING btree (name) WHERE (name IS NOT NULL),null,null,null
INDEXES,vault,secrets,secrets_pkey,CREATE UNIQUE INDEX secrets_pkey ON vault.secrets USING btree (id),null,null,null
RLS_ENABLED,auth,audit_log_entries,true,false,null,null,null
RLS_ENABLED,auth,flow_state,true,false,null,null,null
RLS_ENABLED,auth,identities,true,false,null,null,null
RLS_ENABLED,auth,instances,true,false,null,null,null
RLS_ENABLED,auth,mfa_amr_claims,true,false,null,null,null
RLS_ENABLED,auth,mfa_challenges,true,false,null,null,null
RLS_ENABLED,auth,mfa_factors,true,false,null,null,null
RLS_ENABLED,auth,oauth_authorizations,false,false,null,null,null
RLS_ENABLED,auth,oauth_client_states,false,false,null,null,null
RLS_ENABLED,auth,oauth_clients,false,false,null,null,null
RLS_ENABLED,auth,oauth_consents,false,false,null,null,null
RLS_ENABLED,auth,one_time_tokens,true,false,null,null,null
RLS_ENABLED,auth,refresh_tokens,true,false,null,null,null
RLS_ENABLED,auth,saml_providers,true,false,null,null,null
RLS_ENABLED,auth,saml_relay_states,true,false,null,null,null
RLS_ENABLED,auth,schema_migrations,true,false,null,null,null
RLS_ENABLED,auth,sessions,true,false,null,null,null
RLS_ENABLED,auth,sso_domains,true,false,null,null,null
RLS_ENABLED,auth,sso_providers,true,false,null,null,null
RLS_ENABLED,auth,users,true,false,null,null,null
RLS_ENABLED,public,category_templates,true,false,null,null,null
RLS_ENABLED,public,global_templates,true,false,null,null,null
RLS_ENABLED,public,group_memberships,true,false,null,null,null
RLS_ENABLED,public,group_templates,true,false,null,null,null
RLS_ENABLED,public,groups,true,false,null,null,null
RLS_ENABLED,public,roles,false,false,null,null,null
RLS_ENABLED,public,template_categories,true,false,null,null,null
RLS_ENABLED,public,user_roles,true,false,null,null,null
RLS_ENABLED,public,yacht_owners,true,false,null,null,null
RLS_ENABLED,public,yacht_tasks,true,false,null,null,null
RLS_ENABLED,public,yachts,true,false,null,null,null
RLS_ENABLED,realtime,messages,true,false,null,null,null
RLS_ENABLED,realtime,schema_migrations,false,false,null,null,null
RLS_ENABLED,realtime,subscription,false,false,null,null,null
RLS_ENABLED,storage,buckets,true,false,null,null,null
RLS_ENABLED,storage,buckets_analytics,true,false,null,null,null
RLS_ENABLED,storage,buckets_vectors,true,false,null,null,null
RLS_ENABLED,storage,migrations,true,false,null,null,null
RLS_ENABLED,storage,objects,true,false,null,null,null
RLS_ENABLED,storage,s3_multipart_uploads,true,false,null,null,null
RLS_ENABLED,storage,s3_multipart_uploads_parts,true,false,null,null,null
RLS_ENABLED,storage,vector_indexes,true,false,null,null,null
RLS_ENABLED,vault,secrets,false,false,null,null,null
RLS_POLICIES,public,category_templates,category_templates_delete_admin,DELETE,{authenticated},is_admin(),null
RLS_POLICIES,public,category_templates,category_templates_insert_admin,INSERT,{authenticated},null,is_admin()
RLS_POLICIES,public,category_templates,category_templates_select_admin_all,SELECT,{authenticated},is_admin(),null
RLS_POLICIES,public,category_templates,category_templates_select_manager_crew_visible,SELECT,{authenticated},"(current_user_role() = ANY (ARRAY['manager'::text, 'crew'::text]))",null
RLS_POLICIES,public,category_templates,category_templates_update_admin,UPDATE,{authenticated},is_admin(),is_admin()
RLS_POLICIES,public,global_templates,global_templates_delete_admin,DELETE,{authenticated},is_admin(),null
RLS_POLICIES,public,global_templates,global_templates_insert_admin,INSERT,{authenticated},null,is_admin()
RLS_POLICIES,public,global_templates,global_templates_select_admin_all,SELECT,{authenticated},is_admin(),null
RLS_POLICIES,public,global_templates,global_templates_select_manager_crew_visible,SELECT,{authenticated},"(current_user_role() = ANY (ARRAY['manager'::text, 'crew'::text]))",null
RLS_POLICIES,public,global_templates,global_templates_update_admin,UPDATE,{authenticated},is_admin(),is_admin()
RLS_POLICIES,public,group_memberships,group_memberships_delete_admin,DELETE,{authenticated},is_admin(),null
RLS_POLICIES,public,group_memberships,group_memberships_insert_admin,INSERT,{authenticated},null,is_admin()
RLS_POLICIES,public,group_memberships,group_memberships_select_admin_all,SELECT,{authenticated},is_admin(),null
RLS_POLICIES,public,group_memberships,group_memberships_select_manager_crew_in_groups,SELECT,{authenticated},"((current_user_role() = ANY (ARRAY['manager'::text, 'crew'::text])) AND (group_id IN ( SELECT user_group_ids() AS user_group_ids)))",null
RLS_POLICIES,public,group_memberships,group_memberships_update_admin,UPDATE,{authenticated},is_admin(),is_admin()
RLS_POLICIES,public,group_templates,group_templates_delete_admin,DELETE,{authenticated},is_admin(),null
RLS_POLICIES,public,group_templates,group_templates_delete_manager_in_groups,DELETE,{authenticated},((current_user_role() = 'manager'::text) AND (group_id IN ( SELECT user_group_ids() AS user_group_ids))),null
RLS_POLICIES,public,group_templates,group_templates_insert_admin,INSERT,{authenticated},null,is_admin()
RLS_POLICIES,public,group_templates,group_templates_insert_manager_in_groups,INSERT,{authenticated},null,((current_user_role() = 'manager'::text) AND (group_id IN ( SELECT user_group_ids() AS user_group_ids)))
RLS_POLICIES,public,group_templates,group_templates_select_admin_all,SELECT,{authenticated},is_admin(),null
RLS_POLICIES,public,group_templates,group_templates_select_manager_crew_in_groups,SELECT,{authenticated},"((current_user_role() = ANY (ARRAY['manager'::text, 'crew'::text])) AND (group_id IN ( SELECT user_group_ids() AS user_group_ids)))",null
RLS_POLICIES,public,group_templates,group_templates_update_admin,UPDATE,{authenticated},is_admin(),is_admin()
RLS_POLICIES,public,group_templates,group_templates_update_manager_in_groups,UPDATE,{authenticated},((current_user_role() = 'manager'::text) AND (group_id IN ( SELECT user_group_ids() AS user_group_ids))),((current_user_role() = 'manager'::text) AND (group_id IN ( SELECT user_group_ids() AS user_group_ids)))
RLS_POLICIES,public,groups,groups_delete_admin,DELETE,{authenticated},is_admin(),null
RLS_POLICIES,public,groups,groups_insert_admin,INSERT,{authenticated},null,is_admin()
RLS_POLICIES,public,groups,groups_select_admin_all,SELECT,{authenticated},is_admin(),null
RLS_POLICIES,public,groups,groups_select_manager_crew_in_groups,SELECT,{authenticated},"((current_user_role() = ANY (ARRAY['manager'::text, 'crew'::text])) AND (id IN ( SELECT user_group_ids() AS user_group_ids)))",null
RLS_POLICIES,public,groups,groups_update_admin,UPDATE,{authenticated},is_admin(),is_admin()
RLS_POLICIES,public,template_categories,template_categories_delete_admin,DELETE,{authenticated},is_admin(),null
RLS_POLICIES,public,template_categories,template_categories_insert_admin,INSERT,{authenticated},null,is_admin()
RLS_POLICIES,public,template_categories,template_categories_select_admin_all,SELECT,{authenticated},is_admin(),null
RLS_POLICIES,public,template_categories,template_categories_select_manager_crew_visible,SELECT,{authenticated},"(current_user_role() = ANY (ARRAY['manager'::text, 'crew'::text]))",null
RLS_POLICIES,public,template_categories,template_categories_update_admin,UPDATE,{authenticated},is_admin(),is_admin()
RLS_POLICIES,public,user_roles,user_roles_delete_admin,DELETE,{authenticated},is_admin(),null
RLS_POLICIES,public,user_roles,user_roles_insert_admin,INSERT,{authenticated},null,is_admin()
RLS_POLICIES,public,user_roles,user_roles_select_admin_all,SELECT,{authenticated},is_admin(),null
RLS_POLICIES,public,user_roles,user_roles_select_self,SELECT,{authenticated},(user_id = auth.uid()),null
RLS_POLICIES,public,user_roles,user_roles_update_admin,UPDATE,{authenticated},is_admin(),is_admin()
RLS_POLICIES,public,yacht_owners,yacht_owners_delete_admin,DELETE,{authenticated},is_admin(),null
RLS_POLICIES,public,yacht_owners,yacht_owners_insert_admin,INSERT,{authenticated},null,is_admin()
RLS_POLICIES,public,yacht_owners,yacht_owners_select_admin_all,SELECT,{authenticated},is_admin(),null
RLS_POLICIES,public,yacht_owners,yacht_owners_select_manager_crew_in_scope,SELECT,{authenticated},"((current_user_role() = ANY (ARRAY['manager'::text, 'crew'::text])) AND (yacht_id IN ( SELECT user_yacht_ids() AS user_yacht_ids)))",null
RLS_POLICIES,public,yacht_owners,yacht_owners_select_owner_self,SELECT,{authenticated},((current_user_role() = 'owner'::text) AND (user_id = auth.uid())),null
RLS_POLICIES,public,yacht_owners,yacht_owners_update_admin,UPDATE,{authenticated},is_admin(),is_admin()
RLS_POLICIES,public,yacht_tasks,yacht_tasks_delete_admin,DELETE,{authenticated},is_admin(),null
RLS_POLICIES,public,yacht_tasks,yacht_tasks_delete_manager_in_scope,DELETE,{authenticated},((current_user_role() = 'manager'::text) AND (yacht_id IN ( SELECT user_yacht_ids() AS user_yacht_ids))),null
RLS_POLICIES,public,yacht_tasks,yacht_tasks_insert_admin,INSERT,{authenticated},null,is_admin()
RLS_POLICIES,public,yacht_tasks,yacht_tasks_insert_crew_in_scope,INSERT,{authenticated},null,((current_user_role() = 'crew'::text) AND (yacht_id IN ( SELECT user_yacht_ids() AS user_yacht_ids)))
RLS_POLICIES,public,yacht_tasks,yacht_tasks_insert_manager_in_scope,INSERT,{authenticated},null,((current_user_role() = 'manager'::text) AND (yacht_id IN ( SELECT user_yacht_ids() AS user_yacht_ids)))
RLS_POLICIES,public,yacht_tasks,yacht_tasks_select_admin_all,SELECT,{authenticated},is_admin(),null
RLS_POLICIES,public,yacht_tasks,yacht_tasks_select_manager_crew_in_scope,SELECT,{authenticated},"((current_user_role() = ANY (ARRAY['manager'::text, 'crew'::text])) AND (yacht_id IN ( SELECT user_yacht_ids() AS user_yacht_ids)))",null
RLS_POLICIES,public,yacht_tasks,yacht_tasks_select_owner_approved_in_scope,SELECT,{authenticated},((current_user_role() = 'owner'::text) AND (status = 'approved'::text) AND (yacht_id IN ( SELECT user_yacht_ids() AS user_yacht_ids))),null
RLS_POLICIES,public,yacht_tasks,yacht_tasks_update_admin,UPDATE,{authenticated},is_admin(),is_admin()
RLS_POLICIES,public,yacht_tasks,yacht_tasks_update_crew_in_scope,UPDATE,{authenticated},((current_user_role() = 'crew'::text) AND (yacht_id IN ( SELECT user_yacht_ids() AS user_yacht_ids))),((current_user_role() = 'crew'::text) AND (yacht_id IN ( SELECT user_yacht_ids() AS user_yacht_ids)))
RLS_POLICIES,public,yacht_tasks,yacht_tasks_update_manager_in_scope,UPDATE,{authenticated},((current_user_role() = 'manager'::text) AND (yacht_id IN ( SELECT user_yacht_ids() AS user_yacht_ids))),((current_user_role() = 'manager'::text) AND (yacht_id IN ( SELECT user_yacht_ids() AS user_yacht_ids)))
RLS_POLICIES,public,yachts,yachts_delete_admin,DELETE,{authenticated},is_admin(),null
RLS_POLICIES,public,yachts,yachts_insert_admin,INSERT,{authenticated},null,is_admin()
RLS_POLICIES,public,yachts,yachts_select_admin_all,SELECT,{authenticated},is_admin(),null
RLS_POLICIES,public,yachts,yachts_select_manager_crew_in_scope,SELECT,{authenticated},"((current_user_role() = ANY (ARRAY['manager'::text, 'crew'::text])) AND (id IN ( SELECT user_yacht_ids() AS user_yacht_ids)))",null
RLS_POLICIES,public,yachts,yachts_select_owner_in_scope,SELECT,{authenticated},((current_user_role() = 'owner'::text) AND (id IN ( SELECT user_yacht_ids() AS user_yacht_ids))),null
RLS_POLICIES,public,yachts,yachts_update_admin,UPDATE,{authenticated},is_admin(),is_admin()
ROLES,anon,false,true,false,false,false,false
ROLES,authenticated,false,true,false,false,false,false
ROLES,authenticator,true,false,false,false,false,false
ROLES,dashboard_user,false,true,true,true,true,false
ROLES,postgres,true,true,true,true,true,true
ROLES,service_role,false,true,false,false,false,true
ROLES,supabase_admin,true,true,true,true,true,true
ROLES,supabase_auth_admin,true,false,true,false,false,false
ROLES,supabase_etl_admin,true,true,false,false,true,true
ROLES,supabase_read_only_user,true,true,false,false,false,true
ROLES,supabase_realtime_admin,false,false,false,false,false,false
ROLES,supabase_replication_admin,true,true,false,false,true,false
ROLES,supabase_storage_admin,true,false,true,false,false,false
SCHEMAS,auth,null,null,null,null,null,null
SCHEMAS,graphql,null,null,null,null,null,null
SCHEMAS,graphql_public,null,null,null,null,null,null
SCHEMAS,pg_temp_1,null,null,null,null,null,null
SCHEMAS,pg_temp_11,null,null,null,null,null,null
SCHEMAS,pg_temp_12,null,null,null,null,null,null
SCHEMAS,pg_temp_13,null,null,null,null,null,null
SCHEMAS,pg_temp_18,null,null,null,null,null,null
SCHEMAS,pg_temp_21,null,null,null,null,null,null
SCHEMAS,pg_temp_22,null,null,null,null,null,null
SCHEMAS,pg_temp_24,null,null,null,null,null,null
SCHEMAS,pg_temp_25,null,null,null,null,null,null
SCHEMAS,pg_temp_26,null,null,null,null,null,null
SCHEMAS,pg_temp_33,null,null,null,null,null,null
SCHEMAS,pg_temp_35,null,null,null,null,null,null
SCHEMAS,pg_temp_44,null,null,null,null,null,null
SCHEMAS,pg_temp_50,null,null,null,null,null,null
SCHEMAS,pg_temp_6,null,null,null,null,null,null
SCHEMAS,pg_temp_7,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_1,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_11,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_12,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_13,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_18,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_21,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_22,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_24,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_25,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_26,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_33,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_35,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_44,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_50,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_6,null,null,null,null,null,null
SCHEMAS,pg_toast_temp_7,null,null,null,null,null,null
SCHEMAS,pgbouncer,null,null,null,null,null,null
SCHEMAS,public,null,null,null,null,null,null
SCHEMAS,realtime,null,null,null,null,null,null
SCHEMAS,storage,null,null,null,null,null,null
SCHEMAS,vault,null,null,null,null,null,null
TABLE_GRANTS,auth,audit_log_entries,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,audit_log_entries,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,audit_log_entries,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,audit_log_entries,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,audit_log_entries,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,audit_log_entries,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,audit_log_entries,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,flow_state,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,flow_state,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,flow_state,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,flow_state,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,flow_state,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,flow_state,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,flow_state,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,identities,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,identities,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,identities,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,identities,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,identities,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,identities,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,identities,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,instances,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,instances,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,instances,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,instances,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,instances,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,instances,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,instances,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_amr_claims,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_amr_claims,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_amr_claims,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_amr_claims,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_amr_claims,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_amr_claims,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_amr_claims,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_challenges,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_challenges,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_challenges,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_challenges,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_challenges,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_challenges,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_challenges,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_factors,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_factors,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_factors,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_factors,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_factors,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_factors,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,mfa_factors,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_authorizations,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_authorizations,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_authorizations,postgres,SELECT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_authorizations,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_authorizations,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_authorizations,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_authorizations,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_client_states,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_client_states,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_client_states,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_client_states,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_client_states,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_client_states,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_client_states,postgres,SELECT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_clients,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_clients,postgres,SELECT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_clients,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_clients,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_clients,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_clients,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_clients,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_consents,postgres,SELECT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_consents,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_consents,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_consents,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_consents,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_consents,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,oauth_consents,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,one_time_tokens,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,one_time_tokens,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,one_time_tokens,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,one_time_tokens,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,one_time_tokens,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,one_time_tokens,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,one_time_tokens,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,refresh_tokens,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,refresh_tokens,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,refresh_tokens,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,refresh_tokens,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,refresh_tokens,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,refresh_tokens,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,refresh_tokens,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,saml_providers,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,saml_providers,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,saml_providers,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,saml_providers,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,saml_providers,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,saml_providers,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,saml_providers,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,saml_relay_states,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,saml_relay_states,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,saml_relay_states,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,saml_relay_states,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,saml_relay_states,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,saml_relay_states,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,saml_relay_states,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,schema_migrations,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,sessions,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sessions,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sessions,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sessions,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sessions,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sessions,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sessions,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,sso_domains,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sso_domains,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sso_domains,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sso_domains,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,sso_domains,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sso_domains,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sso_domains,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sso_providers,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,sso_providers,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sso_providers,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sso_providers,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sso_providers,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sso_providers,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,sso_providers,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,users,postgres,TRIGGER,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,users,postgres,SELECT,YES,supabase_auth_admin,null
TABLE_GRANTS,auth,users,postgres,INSERT,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,users,postgres,REFERENCES,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,users,postgres,TRUNCATE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,users,postgres,DELETE,NO,supabase_auth_admin,null
TABLE_GRANTS,auth,users,postgres,UPDATE,NO,supabase_auth_admin,null
TABLE_GRANTS,public,category_templates,anon,DELETE,NO,postgres,null
TABLE_GRANTS,public,category_templates,anon,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,category_templates,anon,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,category_templates,anon,INSERT,NO,postgres,null
TABLE_GRANTS,public,category_templates,anon,SELECT,NO,postgres,null
TABLE_GRANTS,public,category_templates,anon,UPDATE,NO,postgres,null
TABLE_GRANTS,public,category_templates,anon,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,category_templates,authenticated,UPDATE,NO,postgres,null
TABLE_GRANTS,public,category_templates,authenticated,DELETE,NO,postgres,null
TABLE_GRANTS,public,category_templates,authenticated,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,category_templates,authenticated,SELECT,NO,postgres,null
TABLE_GRANTS,public,category_templates,authenticated,INSERT,NO,postgres,null
TABLE_GRANTS,public,category_templates,authenticated,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,category_templates,authenticated,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,category_templates,postgres,INSERT,YES,postgres,null
TABLE_GRANTS,public,category_templates,postgres,REFERENCES,YES,postgres,null
TABLE_GRANTS,public,category_templates,postgres,TRIGGER,YES,postgres,null
TABLE_GRANTS,public,category_templates,postgres,UPDATE,YES,postgres,null
TABLE_GRANTS,public,category_templates,postgres,DELETE,YES,postgres,null
TABLE_GRANTS,public,category_templates,postgres,TRUNCATE,YES,postgres,null
TABLE_GRANTS,public,category_templates,postgres,SELECT,YES,postgres,null
TABLE_GRANTS,public,category_templates,service_role,UPDATE,NO,postgres,null
TABLE_GRANTS,public,category_templates,service_role,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,category_templates,service_role,SELECT,NO,postgres,null
TABLE_GRANTS,public,category_templates,service_role,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,category_templates,service_role,DELETE,NO,postgres,null
TABLE_GRANTS,public,category_templates,service_role,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,category_templates,service_role,INSERT,NO,postgres,null
TABLE_GRANTS,public,global_templates,anon,DELETE,NO,postgres,null
TABLE_GRANTS,public,global_templates,anon,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,global_templates,anon,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,global_templates,anon,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,global_templates,anon,UPDATE,NO,postgres,null
TABLE_GRANTS,public,global_templates,anon,SELECT,NO,postgres,null
TABLE_GRANTS,public,global_templates,anon,INSERT,NO,postgres,null
TABLE_GRANTS,public,global_templates,authenticated,SELECT,NO,postgres,null
TABLE_GRANTS,public,global_templates,authenticated,INSERT,NO,postgres,null
TABLE_GRANTS,public,global_templates,authenticated,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,global_templates,authenticated,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,global_templates,authenticated,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,global_templates,authenticated,DELETE,NO,postgres,null
TABLE_GRANTS,public,global_templates,authenticated,UPDATE,NO,postgres,null
TABLE_GRANTS,public,global_templates,postgres,INSERT,YES,postgres,null
TABLE_GRANTS,public,global_templates,postgres,TRIGGER,YES,postgres,null
TABLE_GRANTS,public,global_templates,postgres,REFERENCES,YES,postgres,null
TABLE_GRANTS,public,global_templates,postgres,TRUNCATE,YES,postgres,null
TABLE_GRANTS,public,global_templates,postgres,DELETE,YES,postgres,null
TABLE_GRANTS,public,global_templates,postgres,UPDATE,YES,postgres,null
TABLE_GRANTS,public,global_templates,postgres,SELECT,YES,postgres,null
TABLE_GRANTS,public,global_templates,service_role,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,global_templates,service_role,INSERT,NO,postgres,null
TABLE_GRANTS,public,global_templates,service_role,SELECT,NO,postgres,null
TABLE_GRANTS,public,global_templates,service_role,UPDATE,NO,postgres,null
TABLE_GRANTS,public,global_templates,service_role,DELETE,NO,postgres,null
TABLE_GRANTS,public,global_templates,service_role,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,global_templates,service_role,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,group_memberships,anon,INSERT,NO,postgres,null
TABLE_GRANTS,public,group_memberships,anon,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,group_memberships,anon,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,group_memberships,anon,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,group_memberships,anon,DELETE,NO,postgres,null
TABLE_GRANTS,public,group_memberships,anon,UPDATE,NO,postgres,null
TABLE_GRANTS,public,group_memberships,anon,SELECT,NO,postgres,null
TABLE_GRANTS,public,group_memberships,authenticated,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,group_memberships,authenticated,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,group_memberships,authenticated,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,group_memberships,authenticated,INSERT,NO,postgres,null
TABLE_GRANTS,public,group_memberships,authenticated,SELECT,NO,postgres,null
TABLE_GRANTS,public,group_memberships,authenticated,UPDATE,NO,postgres,null
TABLE_GRANTS,public,group_memberships,authenticated,DELETE,NO,postgres,null
TABLE_GRANTS,public,group_memberships,postgres,INSERT,YES,postgres,null
TABLE_GRANTS,public,group_memberships,postgres,REFERENCES,YES,postgres,null
TABLE_GRANTS,public,group_memberships,postgres,TRIGGER,YES,postgres,null
TABLE_GRANTS,public,group_memberships,postgres,TRUNCATE,YES,postgres,null
TABLE_GRANTS,public,group_memberships,postgres,DELETE,YES,postgres,null
TABLE_GRANTS,public,group_memberships,postgres,UPDATE,YES,postgres,null
TABLE_GRANTS,public,group_memberships,postgres,SELECT,YES,postgres,null
TABLE_GRANTS,public,group_memberships,service_role,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,group_memberships,service_role,INSERT,NO,postgres,null
TABLE_GRANTS,public,group_memberships,service_role,SELECT,NO,postgres,null
TABLE_GRANTS,public,group_memberships,service_role,UPDATE,NO,postgres,null
TABLE_GRANTS,public,group_memberships,service_role,DELETE,NO,postgres,null
TABLE_GRANTS,public,group_memberships,service_role,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,group_memberships,service_role,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,group_templates,anon,INSERT,NO,postgres,null
TABLE_GRANTS,public,group_templates,anon,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,group_templates,anon,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,group_templates,anon,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,group_templates,anon,DELETE,NO,postgres,null
TABLE_GRANTS,public,group_templates,anon,UPDATE,NO,postgres,null
TABLE_GRANTS,public,group_templates,anon,SELECT,NO,postgres,null
TABLE_GRANTS,public,group_templates,authenticated,INSERT,NO,postgres,null
TABLE_GRANTS,public,group_templates,authenticated,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,group_templates,authenticated,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,group_templates,authenticated,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,group_templates,authenticated,DELETE,NO,postgres,null
TABLE_GRANTS,public,group_templates,authenticated,UPDATE,NO,postgres,null
TABLE_GRANTS,public,group_templates,authenticated,SELECT,NO,postgres,null
TABLE_GRANTS,public,group_templates,postgres,SELECT,YES,postgres,null
TABLE_GRANTS,public,group_templates,postgres,TRIGGER,YES,postgres,null
TABLE_GRANTS,public,group_templates,postgres,REFERENCES,YES,postgres,null
TABLE_GRANTS,public,group_templates,postgres,TRUNCATE,YES,postgres,null
TABLE_GRANTS,public,group_templates,postgres,DELETE,YES,postgres,null
TABLE_GRANTS,public,group_templates,postgres,UPDATE,YES,postgres,null
TABLE_GRANTS,public,group_templates,postgres,INSERT,YES,postgres,null
TABLE_GRANTS,public,group_templates,service_role,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,group_templates,service_role,SELECT,NO,postgres,null
TABLE_GRANTS,public,group_templates,service_role,UPDATE,NO,postgres,null
TABLE_GRANTS,public,group_templates,service_role,DELETE,NO,postgres,null
TABLE_GRANTS,public,group_templates,service_role,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,group_templates,service_role,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,group_templates,service_role,INSERT,NO,postgres,null
TABLE_GRANTS,public,groups,anon,INSERT,NO,postgres,null
TABLE_GRANTS,public,groups,anon,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,groups,anon,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,groups,anon,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,groups,anon,DELETE,NO,postgres,null
TABLE_GRANTS,public,groups,anon,UPDATE,NO,postgres,null
TABLE_GRANTS,public,groups,anon,SELECT,NO,postgres,null
TABLE_GRANTS,public,groups,authenticated,SELECT,NO,postgres,null
TABLE_GRANTS,public,groups,authenticated,INSERT,NO,postgres,null
TABLE_GRANTS,public,groups,authenticated,UPDATE,NO,postgres,null
TABLE_GRANTS,public,groups,authenticated,DELETE,NO,postgres,null
TABLE_GRANTS,public,groups,authenticated,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,groups,authenticated,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,groups,authenticated,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,groups,postgres,INSERT,YES,postgres,null
TABLE_GRANTS,public,groups,postgres,TRIGGER,YES,postgres,null
TABLE_GRANTS,public,groups,postgres,REFERENCES,YES,postgres,null
TABLE_GRANTS,public,groups,postgres,TRUNCATE,YES,postgres,null
TABLE_GRANTS,public,groups,postgres,DELETE,YES,postgres,null
TABLE_GRANTS,public,groups,postgres,UPDATE,YES,postgres,null
TABLE_GRANTS,public,groups,postgres,SELECT,YES,postgres,null
TABLE_GRANTS,public,groups,service_role,UPDATE,NO,postgres,null
TABLE_GRANTS,public,groups,service_role,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,groups,service_role,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,groups,service_role,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,groups,service_role,DELETE,NO,postgres,null
TABLE_GRANTS,public,groups,service_role,SELECT,NO,postgres,null
TABLE_GRANTS,public,groups,service_role,INSERT,NO,postgres,null
TABLE_GRANTS,public,roles,anon,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,roles,anon,INSERT,NO,postgres,null
TABLE_GRANTS,public,roles,anon,SELECT,NO,postgres,null
TABLE_GRANTS,public,roles,anon,UPDATE,NO,postgres,null
TABLE_GRANTS,public,roles,anon,DELETE,NO,postgres,null
TABLE_GRANTS,public,roles,anon,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,roles,anon,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,roles,authenticated,INSERT,NO,postgres,null
TABLE_GRANTS,public,roles,authenticated,SELECT,NO,postgres,null
TABLE_GRANTS,public,roles,authenticated,UPDATE,NO,postgres,null
TABLE_GRANTS,public,roles,authenticated,DELETE,NO,postgres,null
TABLE_GRANTS,public,roles,authenticated,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,roles,authenticated,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,roles,authenticated,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,roles,postgres,SELECT,YES,postgres,null
TABLE_GRANTS,public,roles,postgres,UPDATE,YES,postgres,null
TABLE_GRANTS,public,roles,postgres,DELETE,YES,postgres,null
TABLE_GRANTS,public,roles,postgres,TRUNCATE,YES,postgres,null
TABLE_GRANTS,public,roles,postgres,REFERENCES,YES,postgres,null
TABLE_GRANTS,public,roles,postgres,INSERT,YES,postgres,null
TABLE_GRANTS,public,roles,postgres,TRIGGER,YES,postgres,null
TABLE_GRANTS,public,roles,service_role,INSERT,NO,postgres,null
TABLE_GRANTS,public,roles,service_role,SELECT,NO,postgres,null
TABLE_GRANTS,public,roles,service_role,UPDATE,NO,postgres,null
TABLE_GRANTS,public,roles,service_role,DELETE,NO,postgres,null
TABLE_GRANTS,public,roles,service_role,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,roles,service_role,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,roles,service_role,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,template_categories,anon,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,template_categories,anon,INSERT,NO,postgres,null
TABLE_GRANTS,public,template_categories,anon,SELECT,NO,postgres,null
TABLE_GRANTS,public,template_categories,anon,UPDATE,NO,postgres,null
TABLE_GRANTS,public,template_categories,anon,DELETE,NO,postgres,null
TABLE_GRANTS,public,template_categories,anon,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,template_categories,anon,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,template_categories,authenticated,UPDATE,NO,postgres,null
TABLE_GRANTS,public,template_categories,authenticated,INSERT,NO,postgres,null
TABLE_GRANTS,public,template_categories,authenticated,SELECT,NO,postgres,null
TABLE_GRANTS,public,template_categories,authenticated,DELETE,NO,postgres,null
TABLE_GRANTS,public,template_categories,authenticated,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,template_categories,authenticated,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,template_categories,authenticated,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,template_categories,postgres,INSERT,YES,postgres,null
TABLE_GRANTS,public,template_categories,postgres,REFERENCES,YES,postgres,null
TABLE_GRANTS,public,template_categories,postgres,UPDATE,YES,postgres,null
TABLE_GRANTS,public,template_categories,postgres,TRIGGER,YES,postgres,null
TABLE_GRANTS,public,template_categories,postgres,SELECT,YES,postgres,null
TABLE_GRANTS,public,template_categories,postgres,TRUNCATE,YES,postgres,null
TABLE_GRANTS,public,template_categories,postgres,DELETE,YES,postgres,null
TABLE_GRANTS,public,template_categories,service_role,DELETE,NO,postgres,null
TABLE_GRANTS,public,template_categories,service_role,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,template_categories,service_role,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,template_categories,service_role,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,template_categories,service_role,INSERT,NO,postgres,null
TABLE_GRANTS,public,template_categories,service_role,SELECT,NO,postgres,null
TABLE_GRANTS,public,template_categories,service_role,UPDATE,NO,postgres,null
TABLE_GRANTS,public,user_roles,anon,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,user_roles,anon,DELETE,NO,postgres,null
TABLE_GRANTS,public,user_roles,anon,UPDATE,NO,postgres,null
TABLE_GRANTS,public,user_roles,anon,SELECT,NO,postgres,null
TABLE_GRANTS,public,user_roles,anon,INSERT,NO,postgres,null
TABLE_GRANTS,public,user_roles,anon,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,user_roles,anon,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,user_roles,authenticated,SELECT,NO,postgres,null
TABLE_GRANTS,public,user_roles,authenticated,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,user_roles,authenticated,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,user_roles,authenticated,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,user_roles,authenticated,DELETE,NO,postgres,null
TABLE_GRANTS,public,user_roles,authenticated,INSERT,NO,postgres,null
TABLE_GRANTS,public,user_roles,authenticated,UPDATE,NO,postgres,null
TABLE_GRANTS,public,user_roles,postgres,TRUNCATE,YES,postgres,null
TABLE_GRANTS,public,user_roles,postgres,DELETE,YES,postgres,null
TABLE_GRANTS,public,user_roles,postgres,UPDATE,YES,postgres,null
TABLE_GRANTS,public,user_roles,postgres,SELECT,YES,postgres,null
TABLE_GRANTS,public,user_roles,postgres,INSERT,YES,postgres,null
TABLE_GRANTS,public,user_roles,postgres,TRIGGER,YES,postgres,null
TABLE_GRANTS,public,user_roles,postgres,REFERENCES,YES,postgres,null
TABLE_GRANTS,public,user_roles,service_role,UPDATE,NO,postgres,null
TABLE_GRANTS,public,user_roles,service_role,DELETE,NO,postgres,null
TABLE_GRANTS,public,user_roles,service_role,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,user_roles,service_role,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,user_roles,service_role,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,user_roles,service_role,INSERT,NO,postgres,null
TABLE_GRANTS,public,user_roles,service_role,SELECT,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,anon,INSERT,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,anon,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,anon,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,anon,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,anon,DELETE,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,anon,UPDATE,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,anon,SELECT,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,authenticated,INSERT,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,authenticated,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,authenticated,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,authenticated,DELETE,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,authenticated,UPDATE,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,authenticated,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,authenticated,SELECT,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,postgres,INSERT,YES,postgres,null
TABLE_GRANTS,public,yacht_owners,postgres,UPDATE,YES,postgres,null
TABLE_GRANTS,public,yacht_owners,postgres,TRIGGER,YES,postgres,null
TABLE_GRANTS,public,yacht_owners,postgres,REFERENCES,YES,postgres,null
TABLE_GRANTS,public,yacht_owners,postgres,TRUNCATE,YES,postgres,null
TABLE_GRANTS,public,yacht_owners,postgres,DELETE,YES,postgres,null
TABLE_GRANTS,public,yacht_owners,postgres,SELECT,YES,postgres,null
TABLE_GRANTS,public,yacht_owners,service_role,SELECT,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,service_role,INSERT,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,service_role,UPDATE,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,service_role,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,service_role,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,service_role,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,yacht_owners,service_role,DELETE,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,anon,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,anon,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,anon,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,anon,INSERT,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,anon,SELECT,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,anon,UPDATE,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,anon,DELETE,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,authenticated,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,authenticated,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,authenticated,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,authenticated,INSERT,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,authenticated,SELECT,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,authenticated,UPDATE,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,authenticated,DELETE,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,postgres,DELETE,YES,postgres,null
TABLE_GRANTS,public,yacht_tasks,postgres,REFERENCES,YES,postgres,null
TABLE_GRANTS,public,yacht_tasks,postgres,TRIGGER,YES,postgres,null
TABLE_GRANTS,public,yacht_tasks,postgres,INSERT,YES,postgres,null
TABLE_GRANTS,public,yacht_tasks,postgres,SELECT,YES,postgres,null
TABLE_GRANTS,public,yacht_tasks,postgres,UPDATE,YES,postgres,null
TABLE_GRANTS,public,yacht_tasks,postgres,TRUNCATE,YES,postgres,null
TABLE_GRANTS,public,yacht_tasks,service_role,DELETE,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,service_role,INSERT,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,service_role,SELECT,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,service_role,UPDATE,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,service_role,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,service_role,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,yacht_tasks,service_role,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,yachts,anon,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,yachts,anon,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,yachts,anon,DELETE,NO,postgres,null
TABLE_GRANTS,public,yachts,anon,UPDATE,NO,postgres,null
TABLE_GRANTS,public,yachts,anon,SELECT,NO,postgres,null
TABLE_GRANTS,public,yachts,anon,INSERT,NO,postgres,null
TABLE_GRANTS,public,yachts,anon,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,yachts,authenticated,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,yachts,authenticated,INSERT,NO,postgres,null
TABLE_GRANTS,public,yachts,authenticated,SELECT,NO,postgres,null
TABLE_GRANTS,public,yachts,authenticated,UPDATE,NO,postgres,null
TABLE_GRANTS,public,yachts,authenticated,DELETE,NO,postgres,null
TABLE_GRANTS,public,yachts,authenticated,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,yachts,authenticated,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,yachts,postgres,TRIGGER,YES,postgres,null
TABLE_GRANTS,public,yachts,postgres,TRUNCATE,YES,postgres,null
TABLE_GRANTS,public,yachts,postgres,DELETE,YES,postgres,null
TABLE_GRANTS,public,yachts,postgres,UPDATE,YES,postgres,null
TABLE_GRANTS,public,yachts,postgres,SELECT,YES,postgres,null
TABLE_GRANTS,public,yachts,postgres,INSERT,YES,postgres,null
TABLE_GRANTS,public,yachts,postgres,REFERENCES,YES,postgres,null
TABLE_GRANTS,public,yachts,service_role,TRIGGER,NO,postgres,null
TABLE_GRANTS,public,yachts,service_role,REFERENCES,NO,postgres,null
TABLE_GRANTS,public,yachts,service_role,TRUNCATE,NO,postgres,null
TABLE_GRANTS,public,yachts,service_role,DELETE,NO,postgres,null
TABLE_GRANTS,public,yachts,service_role,UPDATE,NO,postgres,null
TABLE_GRANTS,public,yachts,service_role,SELECT,NO,postgres,null
TABLE_GRANTS,public,yachts,service_role,INSERT,NO,postgres,null
TABLE_GRANTS,realtime,messages,anon,SELECT,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,anon,UPDATE,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,anon,INSERT,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,authenticated,SELECT,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,authenticated,UPDATE,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,authenticated,INSERT,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,dashboard_user,TRIGGER,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,dashboard_user,UPDATE,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,dashboard_user,DELETE,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,dashboard_user,REFERENCES,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,dashboard_user,INSERT,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,dashboard_user,TRUNCATE,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,dashboard_user,SELECT,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,postgres,TRUNCATE,YES,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,postgres,TRIGGER,YES,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,postgres,REFERENCES,YES,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,postgres,INSERT,YES,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,postgres,SELECT,YES,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,postgres,UPDATE,YES,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,postgres,DELETE,YES,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,service_role,UPDATE,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,service_role,SELECT,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,service_role,INSERT,NO,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,supabase_realtime_admin,REFERENCES,YES,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,supabase_realtime_admin,TRIGGER,YES,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,supabase_realtime_admin,DELETE,YES,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,supabase_realtime_admin,SELECT,YES,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,supabase_realtime_admin,INSERT,YES,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,supabase_realtime_admin,TRUNCATE,YES,supabase_realtime_admin,null
TABLE_GRANTS,realtime,messages,supabase_realtime_admin,UPDATE,YES,supabase_realtime_admin,null
TABLE_GRANTS,realtime,schema_migrations,anon,SELECT,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,authenticated,SELECT,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,postgres,SELECT,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,postgres,TRIGGER,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,postgres,REFERENCES,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,postgres,TRUNCATE,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,postgres,DELETE,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,postgres,UPDATE,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,postgres,INSERT,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,service_role,SELECT,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,supabase_realtime_admin,SELECT,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,supabase_realtime_admin,UPDATE,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,supabase_realtime_admin,DELETE,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,supabase_realtime_admin,TRUNCATE,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,supabase_realtime_admin,INSERT,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,supabase_realtime_admin,TRIGGER,NO,supabase_admin,null
TABLE_GRANTS,realtime,schema_migrations,supabase_realtime_admin,REFERENCES,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,anon,SELECT,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,authenticated,SELECT,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,postgres,REFERENCES,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,postgres,DELETE,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,postgres,TRIGGER,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,postgres,INSERT,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,postgres,SELECT,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,postgres,UPDATE,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,postgres,TRUNCATE,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,service_role,SELECT,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,supabase_realtime_admin,REFERENCES,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,supabase_realtime_admin,INSERT,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,supabase_realtime_admin,SELECT,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,supabase_realtime_admin,UPDATE,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,supabase_realtime_admin,DELETE,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,supabase_realtime_admin,TRIGGER,NO,supabase_admin,null
TABLE_GRANTS,realtime,subscription,supabase_realtime_admin,TRUNCATE,NO,supabase_admin,null
TABLE_GRANTS,storage,buckets,anon,INSERT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,anon,TRIGGER,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,anon,REFERENCES,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,anon,TRUNCATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,anon,DELETE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,anon,UPDATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,anon,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,authenticated,TRUNCATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,authenticated,REFERENCES,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,authenticated,TRIGGER,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,authenticated,INSERT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,authenticated,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,authenticated,UPDATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,authenticated,DELETE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,postgres,UPDATE,YES,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,postgres,SELECT,YES,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,postgres,INSERT,YES,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,postgres,TRIGGER,YES,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,postgres,REFERENCES,YES,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,postgres,TRUNCATE,YES,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,postgres,DELETE,YES,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,service_role,TRIGGER,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,service_role,REFERENCES,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,service_role,TRUNCATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,service_role,DELETE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,service_role,UPDATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,service_role,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets,service_role,INSERT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,anon,UPDATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,anon,TRIGGER,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,anon,REFERENCES,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,anon,TRUNCATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,anon,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,anon,INSERT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,anon,DELETE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,authenticated,UPDATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,authenticated,TRUNCATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,authenticated,REFERENCES,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,authenticated,TRIGGER,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,authenticated,INSERT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,authenticated,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,authenticated,DELETE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,service_role,DELETE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,service_role,REFERENCES,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,service_role,TRIGGER,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,service_role,INSERT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,service_role,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,service_role,UPDATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_analytics,service_role,TRUNCATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_vectors,anon,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_vectors,authenticated,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,buckets_vectors,service_role,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,anon,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,anon,REFERENCES,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,anon,TRIGGER,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,anon,UPDATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,anon,DELETE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,anon,TRUNCATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,anon,INSERT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,authenticated,TRIGGER,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,authenticated,DELETE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,authenticated,UPDATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,authenticated,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,authenticated,INSERT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,authenticated,TRUNCATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,authenticated,REFERENCES,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,postgres,SELECT,YES,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,postgres,TRIGGER,YES,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,postgres,REFERENCES,YES,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,postgres,TRUNCATE,YES,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,postgres,DELETE,YES,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,postgres,UPDATE,YES,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,postgres,INSERT,YES,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,service_role,REFERENCES,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,service_role,TRUNCATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,service_role,DELETE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,service_role,UPDATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,service_role,INSERT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,service_role,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,objects,service_role,TRIGGER,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads,anon,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads,authenticated,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads,service_role,TRUNCATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads,service_role,DELETE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads,service_role,UPDATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads,service_role,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads,service_role,INSERT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads,service_role,TRIGGER,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads,service_role,REFERENCES,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads_parts,anon,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads_parts,authenticated,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads_parts,service_role,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads_parts,service_role,TRIGGER,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads_parts,service_role,REFERENCES,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads_parts,service_role,TRUNCATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads_parts,service_role,DELETE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads_parts,service_role,UPDATE,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,s3_multipart_uploads_parts,service_role,INSERT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,vector_indexes,anon,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,vector_indexes,authenticated,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,storage,vector_indexes,service_role,SELECT,NO,supabase_storage_admin,null
TABLE_GRANTS,vault,decrypted_secrets,postgres,SELECT,YES,supabase_admin,null
TABLE_GRANTS,vault,decrypted_secrets,postgres,DELETE,YES,supabase_admin,null
TABLE_GRANTS,vault,decrypted_secrets,postgres,TRUNCATE,YES,supabase_admin,null
TABLE_GRANTS,vault,decrypted_secrets,postgres,REFERENCES,YES,supabase_admin,null
TABLE_GRANTS,vault,decrypted_secrets,service_role,SELECT,NO,supabase_admin,null
TABLE_GRANTS,vault,decrypted_secrets,service_role,DELETE,NO,supabase_admin,null
TABLE_GRANTS,vault,secrets,postgres,DELETE,YES,supabase_admin,null
TABLE_GRANTS,vault,secrets,postgres,SELECT,YES,supabase_admin,null
TABLE_GRANTS,vault,secrets,postgres,REFERENCES,YES,supabase_admin,null
TABLE_GRANTS,vault,secrets,postgres,TRUNCATE,YES,supabase_admin,null
TABLE_GRANTS,vault,secrets,service_role,DELETE,NO,supabase_admin,null
TABLE_GRANTS,vault,secrets,service_role,SELECT,NO,supabase_admin,null
TABLES,auth,audit_log_entries,table,null,null,null,null
TABLES,auth,flow_state,table,null,null,null,null
TABLES,auth,identities,table,null,null,null,null
TABLES,auth,instances,table,null,null,null,null
TABLES,auth,mfa_amr_claims,table,null,null,null,null
TABLES,auth,mfa_challenges,table,null,null,null,null
TABLES,auth,mfa_factors,table,null,null,null,null
TABLES,auth,oauth_authorizations,table,null,null,null,null
TABLES,auth,oauth_client_states,table,null,null,null,null
TABLES,auth,oauth_clients,table,null,null,null,null
TABLES,auth,oauth_consents,table,null,null,null,null
TABLES,auth,one_time_tokens,table,null,null,null,null
TABLES,auth,refresh_tokens,table,null,null,null,null
TABLES,auth,saml_providers,table,null,null,null,null
TABLES,auth,saml_relay_states,table,null,null,null,null
TABLES,auth,schema_migrations,table,null,null,null,null
TABLES,auth,sessions,table,null,null,null,null
TABLES,auth,sso_domains,table,null,null,null,null
TABLES,auth,sso_providers,table,null,null,null,null
TABLES,auth,users,table,null,null,null,null
TABLES,public,category_templates,table,null,null,null,null
TABLES,public,global_templates,table,null,null,null,null
TABLES,public,group_memberships,table,null,null,null,null
TABLES,public,group_templates,table,null,null,null,null
TABLES,public,groups,table,null,null,null,null
TABLES,public,roles,table,null,null,null,null
TABLES,public,template_categories,table,null,null,null,null
TABLES,public,user_roles,table,null,null,null,null
TABLES,public,yacht_owners,table,null,null,null,null
TABLES,public,yacht_tasks,table,null,null,null,null
TABLES,public,yachts,table,null,null,null,null
TABLES,realtime,messages,partitioned_table,null,null,null,null
TABLES,realtime,schema_migrations,table,null,null,null,null
TABLES,realtime,subscription,table,null,null,null,null
TABLES,storage,buckets,table,null,null,null,null
TABLES,storage,buckets_analytics,table,null,null,null,null
TABLES,storage,buckets_vectors,table,null,null,null,null
TABLES,storage,migrations,table,null,null,null,null
TABLES,storage,objects,table,null,null,null,null
TABLES,storage,s3_multipart_uploads,table,null,null,null,null
TABLES,storage,s3_multipart_uploads_parts,table,null,null,null,null
TABLES,storage,vector_indexes,table,null,null,null,null
TABLES,vault,decrypted_secrets,view,null,null,null,null
TABLES,vault,secrets,table,null,null,null,null
TRIGGERS,realtime,subscription,tr_check_filters,BEFORE INSERT,EXECUTE FUNCTION realtime.subscription_check_filters(),null,null
TRIGGERS,realtime,subscription,tr_check_filters,BEFORE UPDATE,EXECUTE FUNCTION realtime.subscription_check_filters(),null,null
TRIGGERS,storage,buckets,enforce_bucket_name_length_trigger,BEFORE UPDATE,EXECUTE FUNCTION storage.enforce_bucket_name_length(),null,null
TRIGGERS,storage,buckets,enforce_bucket_name_length_trigger,BEFORE INSERT,EXECUTE FUNCTION storage.enforce_bucket_name_length(),null,null
TRIGGERS,storage,buckets,protect_buckets_delete,BEFORE DELETE,EXECUTE FUNCTION storage.protect_delete(),null,null
TRIGGERS,storage,objects,protect_objects_delete,BEFORE DELETE,EXECUTE FUNCTION storage.protect_delete(),null,null
TRIGGERS,storage,objects,update_objects_updated_at,BEFORE UPDATE,EXECUTE FUNCTION storage.update_updated_at_column(),null,null
VIEWS,vault,decrypted_secrets," SELECT id,
    name,
    description,
    secret,
    convert_from(vault._crypto_aead_det_decrypt(message => decode(secret, 'base64'::text), additional => convert_to((id)::text, 'utf8'::name), key_id => (0)::bigint, context => '\x7067736f6469756d'::bytea, nonce => nonce), 'utf8'::name) AS decrypted_secret,
    key_id,
    nonce,
    created_at,
    updated_at
   FROM vault.secrets s;",null,null,null,null